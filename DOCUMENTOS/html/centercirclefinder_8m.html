<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NavarQA: D:/TrackEsferas/NavarQA/calib/centercirclefinder.m File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NavarQA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1d2b9e5b9315649ddd44260804b15ee5.html">TrackEsferas</a></li><li class="navelem"><a class="el" href="dir_2a537b95e2b3710cdfb1ed20b7a91e1e.html">NavarQA</a></li><li class="navelem"><a class="el" href="dir_fa3815161b1b54b4c3e9b6b2dc63526e.html">calib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">centercirclefinder.m File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5bbfd9aab0eb486c79db9bbb6d3b80d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a5bbfd9aab0eb486c79db9bbb6d3b80d5">if</a> (<a class="el" href="count__squares_8m.html#ae1706a9f90c377dc4cd30360d9a1af0e">abs</a>(<a class="el" href="project__points__weak_8m.html#aed4504f87c8bc9931dde0c986b52a334">a</a>)&gt; 50 *<a class="el" href="count__squares_8m.html#ae1706a9f90c377dc4cd30360d9a1af0e">abs</a>(<a class="el" href="runme_8m.html#aa49cfdd4fa4d74d71f78a001a1b635d0">c</a>))</td></tr>
<tr class="separator:a5bbfd9aab0eb486c79db9bbb6d3b80d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f510de50d9fa189ec64360ce545ca7d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a4f510de50d9fa189ec64360ce545ca7d">elseif</a> (<a class="el" href="count__squares_8m.html#ae1706a9f90c377dc4cd30360d9a1af0e">abs</a>(<a class="el" href="runme_8m.html#aa49cfdd4fa4d74d71f78a001a1b635d0">c</a>)&gt; 50 *<a class="el" href="count__squares_8m.html#ae1706a9f90c377dc4cd30360d9a1af0e">abs</a>(<a class="el" href="project__points__weak_8m.html#aed4504f87c8bc9931dde0c986b52a334">a</a>)) % <a class="el" href="edgefinder_8m.html#a5a62ce42cd1ef02cb40975ee06079645">xc2</a></td></tr>
<tr class="separator:a4f510de50d9fa189ec64360ce545ca7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b9e3580e8976217fce1afe54cb77649"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a4b9e3580e8976217fce1afe54cb77649">xc</a> (<a class="el" href="stereo__gui_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,:)</td></tr>
<tr class="separator:a4b9e3580e8976217fce1afe54cb77649"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3181c106286f3bbfc446d708d9b1544"><td class="memItemLeft" align="right" valign="top">:, 1&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#aa3181c106286f3bbfc446d708d9b1544">xt</a> ()</td></tr>
<tr class="separator:aa3181c106286f3bbfc446d708d9b1544"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5ba784fc16cea113fed1a59745885bcf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a5ba784fc16cea113fed1a59745885bcf">function</a> [<a class="el" href="edgefinder_8m.html#a4b9e3580e8976217fce1afe54cb77649">xc</a>, <a class="el" href="edgefinder_8m.html#a16f85293e920fd49eda6bf0df98bfd33">good</a>, <a class="el" href="edgefinder_8m.html#ae83cfa749a6be0414f9fc8b0edb52e4e">bad</a>] = centercirclefinder(<a class="el" href="stereo__triangulation_8m.html#ab3c554be4c0e54bab5c9b00203de4941">xt</a>,<a class="el" href="mosaic__no__read_8m.html#a2519f364506853a3dad3e65e1df67c13">I</a>,<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>,<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>)</td></tr>
<tr class="separator:a5ba784fc16cea113fed1a59745885bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae99e8f063b011dafba65cd94236b07b9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#ae99e8f063b011dafba65cd94236b07b9">xt</a> = [521.6249</td></tr>
<tr class="separator:ae99e8f063b011dafba65cd94236b07b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaae28b7917f6488ebee15109ee4bf584"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a> = 60</td></tr>
<tr class="separator:aaae28b7917f6488ebee15109ee4bf584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c431c36e843208390becc7ff37f5c67"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a7c431c36e843208390becc7ff37f5c67">winty</a> = 60</td></tr>
<tr class="separator:a7c431c36e843208390becc7ff37f5c67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b45e71df15c67254a93a6bf1b08b0dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a9b45e71df15c67254a93a6bf1b08b0dc">nargin&lt; 4, winty=5;if nargin&lt; 3, wintx=5;end;end;if nargin&lt; 6, wx2=-1;wy2=-1;end;mask=ones(2 *wintx+1, 2 *winty+1);%mask=exp(-((-wintx:wintx)'/(wintx)).^2) *exp(-((-winty:winty)/(winty)).^2);offx=[-wintx:wintx]' *ones(1, 2 *winty+1);offy=ones(2 *wintx+1, 1) *[-winty:winty];resolution=0.0001;MaxIter=15;[nx, ny]=size(I);N=size(xt, 1);xc=xt;% first guess... they don 't move !!!type_feat=zeros(1, N);for i=1:N, v_extra=resolution+1;% just larger than resolution compt=0;% no iteration yet while(norm(v_extra) &gt; resolution) &amp;(compt&lt; MaxIter), cIx=xc(i, 1);% cIy=xc(i, 2);% Coords. of the point crIx=round(cIx);% on the initial image crIy=round(cIy);% itIx=cIx - crIx;% Coefficients itIy=cIy - crIy;% to compute if itIx &gt; 0, % the sub pixel vIx=[itIx 1-itIx 0]';% accuracy. else vIx=[0 1+itIx -itIx]';end;if itIy &gt; 0, vIy=[itIy 1-itIy 0];else vIy=[0 1+itIy -itIy];end;% What if the sub image is not in? if(crIx-wintx-2&lt; 1), xmin=1;xmax=2 *wintx+5;elseif(crIx+wintx+2 &gt; nx), xmax=nx;xmin=nx-2 *wintx-4;else xmin=crIx-wintx-2;xmax=crIx+wintx+2;end;if(crIy-winty-2&lt; 1), ymin=1;ymax=2 *winty+5;elseif(crIy+winty+2 &gt; ny), ymax=ny;ymin=ny-2 *winty-4;else ymin=crIy-winty-2;ymax=crIy+winty+2;end;SI=I(xmin:xmax, ymin:ymax);% The necessary neighborhood SI=conv2(conv2(SI, vIx, 'same'), vIy, 'same');SI=SI(2:2 *wintx+4, 2:2 *winty+4);% The subpixel interpolated neighborhood[gy, gx]=gradient(SI);% The gradient image gx=gx(2:2 *wintx+2, 2:2 *winty+2);% extraction of the useful parts only gy=gy(2:2 *wintx+2, 2:2 *winty+2);% of the gradients px=cIx+offx;py=cIy+offy;gxx=gx .*gx .*mask;gyy=gy .*gy .*mask;gxy=gx .*gy .*mask;bb=[sum(sum(gyy .*px - gxy .*py));sum(sum(-gxy .*px+gxx .*py))];a=sum(sum(gyy));b=-sum(sum(gxy));c=sum(sum(gxx));dt=a *c - b^2;xc2=[c *bb(1) -b *bb(2) a *bb(2) -b *bb(1)]/dt;%keyboard;%keyboard;% G=[a b;b c];%[U, S, V]=svd(G);% if S(1, 1)/S(2, 2) &gt;</a></td></tr>
<tr class="separator:a9b45e71df15c67254a93a6bf1b08b0dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f4e2cc3ac4aa7afa6c9ec1bdef7462"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a73f4e2cc3ac4aa7afa6c9ec1bdef7462">bb2</a> = <a class="el" href="downsample_8m.html#afbfeed85a467718cf36259f8885b6947">U</a>'*<a class="el" href="_test_function_8m.html#a65ba841e01d6db7733e90a5b7f9e6f80">bb</a></td></tr>
<tr class="separator:a73f4e2cc3ac4aa7afa6c9ec1bdef7462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a62ce42cd1ef02cb40975ee06079645"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a5a62ce42cd1ef02cb40975ee06079645">xc2</a> = (<a class="el" href="downsample_8m.html#a4677652ee1aa71901a1b9b41f3f27bd5">V</a>*[<a class="el" href="edgefinder_8m.html#a73f4e2cc3ac4aa7afa6c9ec1bdef7462">bb2</a>(1)/<a class="el" href="skew3_8m.html#ad53aeb78abc83a52ab8982f5c82a3d5b">S</a>(1,1) ;0])'</td></tr>
<tr class="separator:a5a62ce42cd1ef02cb40975ee06079645"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5dc6e45ec0e66069f2846df5acf1026"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#af5dc6e45ec0e66069f2846df5acf1026">end</a></td></tr>
<tr class="separator:af5dc6e45ec0e66069f2846df5acf1026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9976f3faad68f981f425583e48b03252"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a9976f3faad68f981f425583e48b03252">keyboard</a></td></tr>
<tr class="separator:a9976f3faad68f981f425583e48b03252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30a82f4324aeecaf1bcb5082c06f5949"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a30a82f4324aeecaf1bcb5082c06f5949">v_extra</a> = <a class="el" href="edgefinder_8m.html#a4b9e3580e8976217fce1afe54cb77649">xc</a>(<a class="el" href="stereo__gui_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,:) - <a class="el" href="edgefinder_8m.html#a5a62ce42cd1ef02cb40975ee06079645">xc2</a></td></tr>
<tr class="separator:a30a82f4324aeecaf1bcb5082c06f5949"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a834d18df065d376d123645fee8de8766"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a834d18df065d376d123645fee8de8766">compt</a> = compt + 1</td></tr>
<tr class="separator:a834d18df065d376d123645fee8de8766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b6468f464f82df2d69142949d54898"><td class="memItemLeft" align="right" valign="top">check for <a class="el" href="_distor2_calib_8m.html#ad356fab1d96159f7b2452bde706a9719">points</a> <a class="el" href="readras_8m.html#a7d252fd4b4ae9c8b8af5e91ef645fc1f">that</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a85b6468f464f82df2d69142949d54898">diverge</a></td></tr>
<tr class="separator:a85b6468f464f82df2d69142949d54898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab73d44f0e0438d419515ff3eaad55257"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#ab73d44f0e0438d419515ff3eaad55257">delta_y</a> = <a class="el" href="edgefinder_8m.html#a4b9e3580e8976217fce1afe54cb77649">xc</a>(:,2) - <a class="el" href="stereo__triangulation_8m.html#ab3c554be4c0e54bab5c9b00203de4941">xt</a>(:,2)</td></tr>
<tr class="separator:ab73d44f0e0438d419515ff3eaad55257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae83cfa749a6be0414f9fc8b0edb52e4e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#ae83cfa749a6be0414f9fc8b0edb52e4e">bad</a> = (<a class="el" href="count__squares_8m.html#ae1706a9f90c377dc4cd30360d9a1af0e">abs</a>(<a class="el" href="project__points2_8m.html#a16df747e4f6ab54d4c189551f5ee570d">delta_x</a>) &gt; <a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>) | (<a class="el" href="count__squares_8m.html#ae1706a9f90c377dc4cd30360d9a1af0e">abs</a>(<a class="el" href="edgefinder_8m.html#ab73d44f0e0438d419515ff3eaad55257">delta_y</a>) &gt; <a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>)</td></tr>
<tr class="separator:ae83cfa749a6be0414f9fc8b0edb52e4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16f85293e920fd49eda6bf0df98bfd33"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a16f85293e920fd49eda6bf0df98bfd33">good</a> = ~<a class="el" href="edgefinder_8m.html#ae83cfa749a6be0414f9fc8b0edb52e4e">bad</a></td></tr>
<tr class="separator:a16f85293e920fd49eda6bf0df98bfd33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af225dab14ea0fba9687b9fef7d3d299a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#af225dab14ea0fba9687b9fef7d3d299a">in_bad</a> = find(<a class="el" href="edgefinder_8m.html#ae83cfa749a6be0414f9fc8b0edb52e4e">bad</a>)</td></tr>
<tr class="separator:af225dab14ea0fba9687b9fef7d3d299a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a799a9eb0a2e9c962405cb6dec6d61bea"><td class="memItemLeft" align="right" valign="top">For the diverged&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a799a9eb0a2e9c962405cb6dec6d61bea">points</a></td></tr>
<tr class="separator:a799a9eb0a2e9c962405cb6dec6d61bea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f17773ff6ab978922183f94685d7a76"><td class="memItemLeft" align="right" valign="top">For the diverged keep the original&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a4f17773ff6ab978922183f94685d7a76">guesses</a></td></tr>
<tr class="separator:a4f17773ff6ab978922183f94685d7a76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ecf39fb02bd311cd04c72d89cbfb6d7"><td class="memItemLeft" align="right" valign="top">For the diverged keep the original&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="centercirclefinder_8m.html#a8ecf39fb02bd311cd04c72d89cbfb6d7">xc</a> = fliplr(xc)</td></tr>
<tr class="separator:a8ecf39fb02bd311cd04c72d89cbfb6d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4f510de50d9fa189ec64360ce545ca7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f510de50d9fa189ec64360ce545ca7d">&#9670;&nbsp;</a></span>elseif()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">elseif </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="count__squares_8m.html#ae1706a9f90c377dc4cd30360d9a1af0e">abs</a>(<a class="el" href="runme_8m.html#aa49cfdd4fa4d74d71f78a001a1b635d0">c</a>)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">50 *&#160;</td>
          <td class="paramname"><em>abs</em>a&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5bbfd9aab0eb486c79db9bbb6d3b80d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bbfd9aab0eb486c79db9bbb6d3b80d5">&#9670;&nbsp;</a></span>if()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">if </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="count__squares_8m.html#ae1706a9f90c377dc4cd30360d9a1af0e">abs</a>(<a class="el" href="project__points__weak_8m.html#aed4504f87c8bc9931dde0c986b52a334">a</a>)&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">50 *&#160;</td>
          <td class="paramname"><em>abs</em>c&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4b9e3580e8976217fce1afe54cb77649"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b9e3580e8976217fce1afe54cb77649">&#9670;&nbsp;</a></span>xc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stereo__gui_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">:&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa3181c106286f3bbfc446d708d9b1544"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3181c106286f3bbfc446d708d9b1544">&#9670;&nbsp;</a></span>xt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">:,1 xt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ae83cfa749a6be0414f9fc8b0edb52e4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae83cfa749a6be0414f9fc8b0edb52e4e">&#9670;&nbsp;</a></span>bad</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bad = (<a class="el" href="count__squares_8m.html#ae1706a9f90c377dc4cd30360d9a1af0e">abs</a>(<a class="el" href="project__points2_8m.html#a16df747e4f6ab54d4c189551f5ee570d">delta_x</a>) &gt; <a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>) | (<a class="el" href="count__squares_8m.html#ae1706a9f90c377dc4cd30360d9a1af0e">abs</a>(<a class="el" href="edgefinder_8m.html#ab73d44f0e0438d419515ff3eaad55257">delta_y</a>) &gt; <a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a73f4e2cc3ac4aa7afa6c9ec1bdef7462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73f4e2cc3ac4aa7afa6c9ec1bdef7462">&#9670;&nbsp;</a></span>bb2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a> bb2 = <a class="el" href="downsample_8m.html#afbfeed85a467718cf36259f8885b6947">U</a>'*<a class="el" href="_test_function_8m.html#a65ba841e01d6db7733e90a5b7f9e6f80">bb</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a834d18df065d376d123645fee8de8766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a834d18df065d376d123645fee8de8766">&#9670;&nbsp;</a></span>compt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">compt = compt + 1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab73d44f0e0438d419515ff3eaad55257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab73d44f0e0438d419515ff3eaad55257">&#9670;&nbsp;</a></span>delta_y</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">delta_y = <a class="el" href="edgefinder_8m.html#a4b9e3580e8976217fce1afe54cb77649">xc</a>(:,2) - <a class="el" href="stereo__triangulation_8m.html#ab3c554be4c0e54bab5c9b00203de4941">xt</a>(:,2)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a85b6468f464f82df2d69142949d54898"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b6468f464f82df2d69142949d54898">&#9670;&nbsp;</a></span>diverge</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">check for <a class="el" href="_distor2_calib_8m.html#ad356fab1d96159f7b2452bde706a9719">points</a> <a class="el" href="readras_8m.html#a7d252fd4b4ae9c8b8af5e91ef645fc1f">that</a> diverge</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af5dc6e45ec0e66069f2846df5acf1026"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5dc6e45ec0e66069f2846df5acf1026">&#9670;&nbsp;</a></span>end</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">end end</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5ba784fc16cea113fed1a59745885bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ba784fc16cea113fed1a59745885bcf">&#9670;&nbsp;</a></span>function</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">function[<a class="el" href="edgefinder_8m.html#a4b9e3580e8976217fce1afe54cb77649">xc</a>, <a class="el" href="edgefinder_8m.html#a16f85293e920fd49eda6bf0df98bfd33">good</a>, <a class="el" href="edgefinder_8m.html#ae83cfa749a6be0414f9fc8b0edb52e4e">bad</a>] = centercirclefinder(<a class="el" href="stereo__triangulation_8m.html#ab3c554be4c0e54bab5c9b00203de4941">xt</a>,<a class="el" href="mosaic__no__read_8m.html#a2519f364506853a3dad3e65e1df67c13">I</a>,<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>,<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a16f85293e920fd49eda6bf0df98bfd33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16f85293e920fd49eda6bf0df98bfd33">&#9670;&nbsp;</a></span>good</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">good = ~<a class="el" href="edgefinder_8m.html#ae83cfa749a6be0414f9fc8b0edb52e4e">bad</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4f17773ff6ab978922183f94685d7a76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f17773ff6ab978922183f94685d7a76">&#9670;&nbsp;</a></span>guesses</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">For the diverged keep the original guesses</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af225dab14ea0fba9687b9fef7d3d299a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af225dab14ea0fba9687b9fef7d3d299a">&#9670;&nbsp;</a></span>in_bad</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">in_bad = find(<a class="el" href="edgefinder_8m.html#ae83cfa749a6be0414f9fc8b0edb52e4e">bad</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9976f3faad68f981f425583e48b03252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9976f3faad68f981f425583e48b03252">&#9670;&nbsp;</a></span>keyboard</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">keyboard</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a9b45e71df15c67254a93a6bf1b08b0dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b45e71df15c67254a93a6bf1b08b0dc">&#9670;&nbsp;</a></span>nargin&lt; 4, winty=5;if nargin&lt; 3, wintx=5;end;end;if nargin&lt; 6, wx2=-1;wy2=-1;end;mask=ones(2 *wintx+1, 2 *winty+1);%mask=exp(-((-wintx:wintx)'/(wintx)).^2) *exp(-((-winty:winty)/(winty)).^2);offx=[-wintx:wintx]' *ones(1, 2 *winty+1);offy=ones(2 *wintx+1, 1) *[-winty:winty];resolution=0.0001;MaxIter=15;[nx, ny]=size(I);N=size(xt, 1);xc=xt;% first guess... they don 't move !!!type_feat=zeros(1, N);for i=1:N, v_extra=resolution+1;% just larger than resolution compt=0;% no iteration yet while(norm(v_extra) &gt; resolution) &amp;(compt&lt; MaxIter), cIx=xc(i, 1);% cIy=xc(i, 2);% Coords. of the point crIx=round(cIx);% on the initial image crIy=round(cIy);% itIx=cIx - crIx;% Coefficients itIy=cIy - crIy;% to compute if itIx &gt; 0, % the sub pixel vIx=[itIx 1-itIx 0]';% accuracy. else vIx=[0 1+itIx -itIx]';end;if itIy &gt; 0, vIy=[itIy 1-itIy 0];else vIy=[0 1+itIy -itIy];end;% What if the sub image is not in? if(crIx-wintx-2&lt; 1), xmin=1;xmax=2 *wintx+5;elseif(crIx+wintx+2 &gt; nx), xmax=nx;xmin=nx-2 *wintx-4;else xmin=crIx-wintx-2;xmax=crIx+wintx+2;end;if(crIy-winty-2&lt; 1), ymin=1;ymax=2 *winty+5;elseif(crIy+winty+2 &gt; ny), ymax=ny;ymin=ny-2 *winty-4;else ymin=crIy-winty-2;ymax=crIy+winty+2;end;SI=I(xmin:xmax, ymin:ymax);% The necessary neighborhood SI=conv2(conv2(SI, vIx, 'same'), vIy, 'same');SI=SI(2:2 *wintx+4, 2:2 *winty+4);% The subpixel interpolated neighborhood[gy, gx]=gradient(SI);% The gradient image gx=gx(2:2 *wintx+2, 2:2 *winty+2);% extraction of the useful parts only gy=gy(2:2 *wintx+2, 2:2 *winty+2);% of the gradients px=cIx+offx;py=cIy+offy;gxx=gx .*gx .*mask;gyy=gy .*gy .*mask;gxy=gx .*gy .*mask;bb=[sum(sum(gyy .*px - gxy .*py));sum(sum(-gxy .*px+gxx .*py))];a=sum(sum(gyy));b=-sum(sum(gxy));c=sum(sum(gxx));dt=a *c - b^2;xc2=[c *bb(1) -b *bb(2) a *bb(2) -b *bb(1)]/dt;%keyboard;%keyboard;% G=[a b;b c];%[U, S, V]=svd(G);% if S(1, 1)/S(2, 2) &gt;</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a> <a class="el" href="ginput4_8m.html#aafbb9d50e573e4009d0650c645566ddd">nargin</a>&lt; 4, <a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>=5; <a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a> <a class="el" href="ginput4_8m.html#aafbb9d50e573e4009d0650c645566ddd">nargin</a>&lt; 3, <a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>=5; <a class="el" href="write__image_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a>;<a class="el" href="write__image_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a>;<a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a> <a class="el" href="ginput4_8m.html#aafbb9d50e573e4009d0650c645566ddd">nargin</a>&lt; 6, wx2=-1; wy2=-1;<a class="el" href="write__image_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a>;<a class="el" href="_compute_stripes_8m.html#ae37ced135688952706a4686437438cf2">mask</a>=<a class="el" href="visualize__distortions_8m.html#a45582fcee3c7b631afa5f55a959b0c13">ones</a>(2 *<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>+1, 2 *<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>+1);%<a class="el" href="_compute_stripes_8m.html#ae37ced135688952706a4686437438cf2">mask</a>=exp(-((-wintx:wintx)'/(<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>)).^2) *exp(-((-winty:winty)/(<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>)).^2);offx=[-wintx:wintx]' *<a class="el" href="visualize__distortions_8m.html#a45582fcee3c7b631afa5f55a959b0c13">ones</a>(1, 2 *<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>+1);offy=<a class="el" href="visualize__distortions_8m.html#a45582fcee3c7b631afa5f55a959b0c13">ones</a>(2 *<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>+1, 1) *[-winty:winty];<a class="el" href="_compute_stripes_8m.html#a698a8ac0b1fd75d3c716b842b0206c67">resolution</a>=0.0001;<a class="el" href="go__calib__stereo_8m.html#a15441a1c53e758379cbf1bb004cbd66a">MaxIter</a>=15;[<a class="el" href="willson__read_8m.html#a2f6e152702d97ea3f1b96a6e2e2b9687">nx</a>, <a class="el" href="willson__read_8m.html#a2f43d084523823503800b3a4a5d309ca">ny</a>]=<a class="el" href="undistort__image__no__read_8m.html#acef99621e828a8da6e90436ef5178cea">size</a>(<a class="el" href="mosaic__no__read_8m.html#a2519f364506853a3dad3e65e1df67c13">I</a>);<a class="el" href="normalize2_8m.html#a8cc2e7240164328fdc3f0e5e21032c56">N</a>=<a class="el" href="undistort__image__no__read_8m.html#acef99621e828a8da6e90436ef5178cea">size</a>(<a class="el" href="stereo__triangulation_8m.html#ab3c554be4c0e54bab5c9b00203de4941">xt</a>, 1);<a class="el" href="edgefinder_8m.html#a4b9e3580e8976217fce1afe54cb77649">xc</a>=<a class="el" href="stereo__triangulation_8m.html#ab3c554be4c0e54bab5c9b00203de4941">xt</a>;% first guess... they don '<a class="el" href="rectify__stereo__pair_8m.html#aaccc9105df5383111407fd5b41255e23">t</a> move !!!type_feat=<a class="el" href="scanner__calibration__script_8m.html#a495838e20f780998846263933acb0819">zeros</a>(1, <a class="el" href="normalize2_8m.html#a8cc2e7240164328fdc3f0e5e21032c56">N</a>);for <a class="el" href="stereo__gui_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>=1:<a class="el" href="normalize2_8m.html#a8cc2e7240164328fdc3f0e5e21032c56">N</a>, <a class="el" href="edgefinder_8m.html#a30a82f4324aeecaf1bcb5082c06f5949">v_extra</a>=<a class="el" href="_compute_stripes_8m.html#a698a8ac0b1fd75d3c716b842b0206c67">resolution</a>+1; % just larger <a class="el" href="compute__homography_8m.html#af3f959e84fefd95105b45aa5de288711">than</a> <a class="el" href="_compute_stripes_8m.html#a698a8ac0b1fd75d3c716b842b0206c67">resolution</a> <a class="el" href="edgefinder_8m.html#a834d18df065d376d123645fee8de8766">compt</a>=0; % no iteration yet <a class="el" href="ima__read__calib__no__read_8m.html#afbc447f3197e9cdcaceaceab8ed359e2">while</a>(<a class="el" href="willson__convert_8m.html#a9c27fc2ed3dd0bbc5add976bd170b402">norm</a>(<a class="el" href="edgefinder_8m.html#a30a82f4324aeecaf1bcb5082c06f5949">v_extra</a>) &gt; <a class="el" href="_compute_stripes_8m.html#a698a8ac0b1fd75d3c716b842b0206c67">resolution</a>) &amp;(<a class="el" href="edgefinder_8m.html#a834d18df065d376d123645fee8de8766">compt</a>&lt; <a class="el" href="go__calib__stereo_8m.html#a15441a1c53e758379cbf1bb004cbd66a">MaxIter</a>), cIx=<a class="el" href="edgefinder_8m.html#a4b9e3580e8976217fce1afe54cb77649">xc</a>(<a class="el" href="stereo__gui_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>, 1); % cIy=<a class="el" href="edgefinder_8m.html#a4b9e3580e8976217fce1afe54cb77649">xc</a>(<a class="el" href="stereo__gui_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>, 2); % Coords. of the <a class="el" href="willson__convert_8m.html#aeb407484ccae58e27ee8ade327e0651b">point</a> crIx=round(cIx); % <a class="el" href="visualize__distortions_8m.html#a58ab1fd68e97078232808206b850161b">on</a> the initial <a class="el" href="script__fit__distortion_8m.html#ac8a8411243371a1be29a938cf1c083fb">image</a> crIy=round(cIy); % itIx=cIx - crIx; % Coefficients <a class="el" href="cornerfinder__saddle__point_8m.html#a0650a7366cca60864c1b95ec8456223a">itIy</a>=cIy - crIy; % <a class="el" href="inverse__motion_8m.html#adaa3d343ac20bed84559c0771f592ed4">to</a> compute <a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a> itIx &gt; 0, % the sub pixel <a class="el" href="cornerfinder__saddle__point_8m.html#af9023cb1de60b857310aedef005fa797">vIx</a>=[itIx 1-itIx 0]'; % accuracy. <a class="el" href="go__calib__stereo_8m.html#a78a072094b6e0d352ef9b3c4bdf3799b">else</a> <a class="el" href="cornerfinder__saddle__point_8m.html#af9023cb1de60b857310aedef005fa797">vIx</a>=[0 1+itIx -itIx]'; <a class="el" href="write__image_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a>; <a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a> <a class="el" href="cornerfinder__saddle__point_8m.html#a0650a7366cca60864c1b95ec8456223a">itIy</a> &gt; 0, <a class="el" href="cornerfinder__saddle__point_8m.html#af78ee5dddd0ca0db7791f30dab64dda4">vIy</a>=[<a class="el" href="cornerfinder__saddle__point_8m.html#a0650a7366cca60864c1b95ec8456223a">itIy</a> 1-<a class="el" href="cornerfinder__saddle__point_8m.html#a0650a7366cca60864c1b95ec8456223a">itIy</a> 0]; <a class="el" href="go__calib__stereo_8m.html#a78a072094b6e0d352ef9b3c4bdf3799b">else</a> <a class="el" href="cornerfinder__saddle__point_8m.html#af78ee5dddd0ca0db7791f30dab64dda4">vIy</a>=[0 1+<a class="el" href="cornerfinder__saddle__point_8m.html#a0650a7366cca60864c1b95ec8456223a">itIy</a> -<a class="el" href="cornerfinder__saddle__point_8m.html#a0650a7366cca60864c1b95ec8456223a">itIy</a>]; <a class="el" href="write__image_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a>; % What <a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a> the sub <a class="el" href="script__fit__distortion_8m.html#ac8a8411243371a1be29a938cf1c083fb">image</a> <a class="el" href="go__calib__optim__iter__weak_8m.html#a00d9614e711bf169f15ae8e3e35d30df">is</a> not in? <a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a>(crIx-<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>-2&lt; 1), <a class="el" href="cornerfinder__saddle__point_8m.html#a5cebf6c66aa9ad1f352db36f41e81036">xmin</a>=1;<a class="el" href="cornerfinder__saddle__point_8m.html#aaa545f09e6592c936f524ca484584c28">xmax</a>=2 *<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>+5; <a class="el" href="rodrigues_8m.html#a5f033261004b0140fc2e1a4f5ba9f9b4">elseif</a>(crIx+<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>+2 &gt; <a class="el" href="willson__read_8m.html#a2f6e152702d97ea3f1b96a6e2e2b9687">nx</a>), <a class="el" href="cornerfinder__saddle__point_8m.html#aaa545f09e6592c936f524ca484584c28">xmax</a>=<a class="el" href="willson__read_8m.html#a2f6e152702d97ea3f1b96a6e2e2b9687">nx</a>;<a class="el" href="cornerfinder__saddle__point_8m.html#a5cebf6c66aa9ad1f352db36f41e81036">xmin</a>=<a class="el" href="willson__read_8m.html#a2f6e152702d97ea3f1b96a6e2e2b9687">nx</a>-2 *<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>-4; <a class="el" href="go__calib__stereo_8m.html#a78a072094b6e0d352ef9b3c4bdf3799b">else</a> <a class="el" href="cornerfinder__saddle__point_8m.html#a5cebf6c66aa9ad1f352db36f41e81036">xmin</a>=crIx-<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>-2;<a class="el" href="cornerfinder__saddle__point_8m.html#aaa545f09e6592c936f524ca484584c28">xmax</a>=crIx+<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>+2; <a class="el" href="write__image_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a>; <a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a>(crIy-<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>-2&lt; 1), <a class="el" href="cornerfinder__saddle__point_8m.html#a2d98da502a985371babc8e0230b0a536">ymin</a>=1;<a class="el" href="cornerfinder__saddle__point_8m.html#aa2b7f6145d75dc845bff0f00c6452e54">ymax</a>=2 *<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>+5; <a class="el" href="rodrigues_8m.html#a5f033261004b0140fc2e1a4f5ba9f9b4">elseif</a>(crIy+<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>+2 &gt; <a class="el" href="willson__read_8m.html#a2f43d084523823503800b3a4a5d309ca">ny</a>), <a class="el" href="cornerfinder__saddle__point_8m.html#aa2b7f6145d75dc845bff0f00c6452e54">ymax</a>=<a class="el" href="willson__read_8m.html#a2f43d084523823503800b3a4a5d309ca">ny</a>;<a class="el" href="cornerfinder__saddle__point_8m.html#a2d98da502a985371babc8e0230b0a536">ymin</a>=<a class="el" href="willson__read_8m.html#a2f43d084523823503800b3a4a5d309ca">ny</a>-2 *<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>-4; <a class="el" href="go__calib__stereo_8m.html#a78a072094b6e0d352ef9b3c4bdf3799b">else</a> <a class="el" href="cornerfinder__saddle__point_8m.html#a2d98da502a985371babc8e0230b0a536">ymin</a>=crIy-<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>-2;<a class="el" href="cornerfinder__saddle__point_8m.html#aa2b7f6145d75dc845bff0f00c6452e54">ymax</a>=crIy+<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>+2; <a class="el" href="write__image_8m.html#afb358f48b1646c750fb9da6c6585be2b">end</a>; <a class="el" href="cornerfinder__saddle__point_8m.html#a9189b8c237d7e133ae5d30ff453ae62c">SI</a>=<a class="el" href="mosaic__no__read_8m.html#a2519f364506853a3dad3e65e1df67c13">I</a>(xmin:xmax, ymin:ymax);% The necessary neighborhood <a class="el" href="cornerfinder__saddle__point_8m.html#a9189b8c237d7e133ae5d30ff453ae62c">SI</a>=conv2(conv2(<a class="el" href="cornerfinder__saddle__point_8m.html#a9189b8c237d7e133ae5d30ff453ae62c">SI</a>, <a class="el" href="cornerfinder__saddle__point_8m.html#af9023cb1de60b857310aedef005fa797">vIx</a>, '<a class="el" href="rectify__stereo__pair_8m.html#a74de3909f790e0187e6baa753abebdf4">same</a>'), <a class="el" href="cornerfinder__saddle__point_8m.html#af78ee5dddd0ca0db7791f30dab64dda4">vIy</a>, '<a class="el" href="rectify__stereo__pair_8m.html#a74de3909f790e0187e6baa753abebdf4">same</a>'); <a class="el" href="cornerfinder__saddle__point_8m.html#a9189b8c237d7e133ae5d30ff453ae62c">SI</a>=<a class="el" href="cornerfinder__saddle__point_8m.html#a9189b8c237d7e133ae5d30ff453ae62c">SI</a>(2:2 *<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>+4, 2:2 *<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>+4);% The subpixel interpolated neighborhood[gy, gx]=gradient(<a class="el" href="cornerfinder__saddle__point_8m.html#a9189b8c237d7e133ae5d30ff453ae62c">SI</a>); % The gradient <a class="el" href="script__fit__distortion_8m.html#ac8a8411243371a1be29a938cf1c083fb">image</a> gx=gx(2:2 *<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>+2, 2:2 *<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>+2);% <a class="el" href="error__depth__list_8m.html#ad5c4a59ae665afd234a9b99e05b922f2">extraction</a> of the useful parts only gy=gy(2:2 *<a class="el" href="saving__calib__no__results_8m.html#aaae28b7917f6488ebee15109ee4bf584">wintx</a>+2, 2:2 *<a class="el" href="saving__calib__no__results_8m.html#a4b7bcd3a9dc801cf789379ec4d33ebc1">winty</a>+2);% of the gradients <a class="el" href="visualize__distortions_8m.html#a7bbfda5adf16be7dc49154740eb37388">px</a>=cIx+offx; <a class="el" href="visualize__distortions_8m.html#a2cdc66c1c33fd831cc3a2f3a7c06ea1a">py</a>=cIy+offy; gxx=gx .*gx .*<a class="el" href="_compute_stripes_8m.html#ae37ced135688952706a4686437438cf2">mask</a>; gyy=gy .*gy .*<a class="el" href="_compute_stripes_8m.html#ae37ced135688952706a4686437438cf2">mask</a>; gxy=gx .*gy .*<a class="el" href="_compute_stripes_8m.html#ae37ced135688952706a4686437438cf2">mask</a>; <a class="el" href="_test_function_8m.html#a65ba841e01d6db7733e90a5b7f9e6f80">bb</a>=[<a class="el" href="go__calib__optim__iter__weak_8m.html#a84fc371dc8106a6d6ade7b5e736f09b7">sum</a>(<a class="el" href="go__calib__optim__iter__weak_8m.html#a84fc371dc8106a6d6ade7b5e736f09b7">sum</a>(gyy .*<a class="el" href="visualize__distortions_8m.html#a7bbfda5adf16be7dc49154740eb37388">px</a> - gxy .*<a class="el" href="visualize__distortions_8m.html#a2cdc66c1c33fd831cc3a2f3a7c06ea1a">py</a>));<a class="el" href="go__calib__optim__iter__weak_8m.html#a84fc371dc8106a6d6ade7b5e736f09b7">sum</a>(<a class="el" href="go__calib__optim__iter__weak_8m.html#a84fc371dc8106a6d6ade7b5e736f09b7">sum</a>(-gxy .*<a class="el" href="visualize__distortions_8m.html#a7bbfda5adf16be7dc49154740eb37388">px</a>+gxx .*<a class="el" href="visualize__distortions_8m.html#a2cdc66c1c33fd831cc3a2f3a7c06ea1a">py</a>))]; <a class="el" href="project__points__weak_8m.html#aed4504f87c8bc9931dde0c986b52a334">a</a>=<a class="el" href="go__calib__optim__iter__weak_8m.html#a84fc371dc8106a6d6ade7b5e736f09b7">sum</a>(<a class="el" href="go__calib__optim__iter__weak_8m.html#a84fc371dc8106a6d6ade7b5e736f09b7">sum</a>(gyy)); <a class="el" href="smooth__images_8m.html#a7a1752f5e40c5479a01672ac853b1541">b</a>=-<a class="el" href="go__calib__optim__iter__weak_8m.html#a84fc371dc8106a6d6ade7b5e736f09b7">sum</a>(<a class="el" href="go__calib__optim__iter__weak_8m.html#a84fc371dc8106a6d6ade7b5e736f09b7">sum</a>(gxy)); <a class="el" href="runme_8m.html#aa49cfdd4fa4d74d71f78a001a1b635d0">c</a>=<a class="el" href="go__calib__optim__iter__weak_8m.html#a84fc371dc8106a6d6ade7b5e736f09b7">sum</a>(<a class="el" href="go__calib__optim__iter__weak_8m.html#a84fc371dc8106a6d6ade7b5e736f09b7">sum</a>(gxx)); dt=<a class="el" href="project__points__weak_8m.html#aed4504f87c8bc9931dde0c986b52a334">a</a> *<a class="el" href="runme_8m.html#aa49cfdd4fa4d74d71f78a001a1b635d0">c</a> - <a class="el" href="smooth__images_8m.html#a7a1752f5e40c5479a01672ac853b1541">b</a>^2; <a class="el" href="edgefinder_8m.html#a5a62ce42cd1ef02cb40975ee06079645">xc2</a>=[<a class="el" href="runme_8m.html#aa49cfdd4fa4d74d71f78a001a1b635d0">c</a> *<a class="el" href="_test_function_8m.html#a65ba841e01d6db7733e90a5b7f9e6f80">bb</a>(1) -<a class="el" href="smooth__images_8m.html#a7a1752f5e40c5479a01672ac853b1541">b</a> *<a class="el" href="_test_function_8m.html#a65ba841e01d6db7733e90a5b7f9e6f80">bb</a>(2) <a class="el" href="project__points__weak_8m.html#aed4504f87c8bc9931dde0c986b52a334">a</a> *<a class="el" href="_test_function_8m.html#a65ba841e01d6db7733e90a5b7f9e6f80">bb</a>(2) -<a class="el" href="smooth__images_8m.html#a7a1752f5e40c5479a01672ac853b1541">b</a> *<a class="el" href="_test_function_8m.html#a65ba841e01d6db7733e90a5b7f9e6f80">bb</a>(1)]/dt; %<a class="el" href="saveppm_8m.html#a9976f3faad68f981f425583e48b03252">keyboard</a>; %<a class="el" href="saveppm_8m.html#a9976f3faad68f981f425583e48b03252">keyboard</a>; % <a class="el" href="saveppm_8m.html#a86d8d92aba9ecf9bbf89f69cb3e49588">G</a>=[<a class="el" href="project__points__weak_8m.html#aed4504f87c8bc9931dde0c986b52a334">a</a> <a class="el" href="smooth__images_8m.html#a7a1752f5e40c5479a01672ac853b1541">b</a>;<a class="el" href="smooth__images_8m.html#a7a1752f5e40c5479a01672ac853b1541">b</a> <a class="el" href="runme_8m.html#aa49cfdd4fa4d74d71f78a001a1b635d0">c</a>];%[<a class="el" href="downsample_8m.html#afbfeed85a467718cf36259f8885b6947">U</a>, <a class="el" href="skew3_8m.html#ad53aeb78abc83a52ab8982f5c82a3d5b">S</a>, <a class="el" href="downsample_8m.html#a4677652ee1aa71901a1b9b41f3f27bd5">V</a>]=svd(<a class="el" href="saveppm_8m.html#a86d8d92aba9ecf9bbf89f69cb3e49588">G</a>);% <a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a> <a class="el" href="skew3_8m.html#ad53aeb78abc83a52ab8982f5c82a3d5b">S</a>(1, 1)/<a class="el" href="skew3_8m.html#ad53aeb78abc83a52ab8982f5c82a3d5b">S</a>(2, 2) &gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a799a9eb0a2e9c962405cb6dec6d61bea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a799a9eb0a2e9c962405cb6dec6d61bea">&#9670;&nbsp;</a></span>points</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Normalizaion of the vanishing points</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a30a82f4324aeecaf1bcb5082c06f5949"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30a82f4324aeecaf1bcb5082c06f5949">&#9670;&nbsp;</a></span>v_extra</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">v_extra = <a class="el" href="edgefinder_8m.html#a4b9e3580e8976217fce1afe54cb77649">xc</a>(<a class="el" href="stereo__gui_8m.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>,:) - <a class="el" href="edgefinder_8m.html#a5a62ce42cd1ef02cb40975ee06079645">xc2</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aaae28b7917f6488ebee15109ee4bf584"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaae28b7917f6488ebee15109ee4bf584">&#9670;&nbsp;</a></span>wintx</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a> wintx = 60</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7c431c36e843208390becc7ff37f5c67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c431c36e843208390becc7ff37f5c67">&#9670;&nbsp;</a></span>winty</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stereo_2otros_2matlab2opencv_8m.html#a395c74f44b735213449a80587b6388e9">if</a> winty = 60</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8ecf39fb02bd311cd04c72d89cbfb6d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ecf39fb02bd311cd04c72d89cbfb6d7">&#9670;&nbsp;</a></span>xc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xc = fliplr(xc)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5a62ce42cd1ef02cb40975ee06079645"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a62ce42cd1ef02cb40975ee06079645">&#9670;&nbsp;</a></span>xc2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="go__calib__stereo_8m.html#a78a072094b6e0d352ef9b3c4bdf3799b">else</a> xc2 = (<a class="el" href="downsample_8m.html#a4677652ee1aa71901a1b9b41f3f27bd5">V</a>*[<a class="el" href="edgefinder_8m.html#a73f4e2cc3ac4aa7afa6c9ec1bdef7462">bb2</a>(1)/<a class="el" href="skew3_8m.html#ad53aeb78abc83a52ab8982f5c82a3d5b">S</a>(1,1) ;0])'</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae99e8f063b011dafba65cd94236b07b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae99e8f063b011dafba65cd94236b07b9">&#9670;&nbsp;</a></span>xt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">xt = [521.6249</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
