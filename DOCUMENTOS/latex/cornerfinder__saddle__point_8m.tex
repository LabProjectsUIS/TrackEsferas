\hypertarget{cornerfinder__saddle__point_8m}{}\doxysection{D\+:/\+Track\+Esferas/\+Navar\+Q\+A/calib/cornerfinder\+\_\+saddle\+\_\+point.m File Reference}
\label{cornerfinder__saddle__point_8m}\index{D:/TrackEsferas/NavarQA/calib/cornerfinder\_saddle\_point.m@{D:/TrackEsferas/NavarQA/calib/cornerfinder\_saddle\_point.m}}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
vertical \mbox{\hyperlink{cornerfinder__saddle__point_8m_a749ccdd6d57b26d9a867b35a5f7a1d09}{points\+:}} (\mbox{\hyperlink{runme_8m_aa49cfdd4fa4d74d71f78a001a1b635d0}{c}} \mbox{\hyperlink{stereo__triangulation_8m_ab3c554be4c0e54bab5c9b00203de4941}{xt}})
\item 
What if the sub \mbox{\hyperlink{script__fit__distortion_8m_ac8a8411243371a1be29a938cf1c083fb}{image}} \mbox{\hyperlink{go__calib__optim__iter__weak_8m_a00d9614e711bf169f15ae8e3e35d30df}{is}} not in \mbox{\hyperlink{cornerfinder__saddle__point_8m_a82f680e0907baa62a1b874d8e7a20f06}{if}} (cr\+Ix-\/\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}-\/2$<$ 1)
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a86b655300f1b0c5f9e3b454596e0b864}{elseif}} (cr\+Ix+\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+2 $>$ \mbox{\hyperlink{willson__read_8m_a2f6e152702d97ea3f1b96a6e2e2b9687}{nx}})
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a88c489c3611424933ccaa5fb9bd8d384}{elseif}} (cr\+Iy+\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+2 $>$ \mbox{\hyperlink{willson__read_8m_a2f43d084523823503800b3a4a5d309ca}{ny}})
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}} (\mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}},\+:)
\item 
\+:, 1 \mbox{\hyperlink{cornerfinder__saddle__point_8m_aa3181c106286f3bbfc446d708d9b1544}{xt}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a342971ae976e878b9741be4650e99c6c}{function}} \mbox{[}\mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}, \mbox{\hyperlink{edgefinder_8m_a16f85293e920fd49eda6bf0df98bfd33}{good}}, \mbox{\hyperlink{edgefinder_8m_ae83cfa749a6be0414f9fc8b0edb52e4e}{bad}}, \mbox{\hyperlink{readras_8m_a7aead736a07eaf25623ad7bfa1f0ee2d}{type}}\mbox{]} = cornerfinder\+\_\+saddle\+\_\+point(\mbox{\hyperlink{stereo__triangulation_8m_ab3c554be4c0e54bab5c9b00203de4941}{xt}},\mbox{\hyperlink{mosaic__no__read_8m_a2519f364506853a3dad3e65e1df67c13}{I}},\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}},\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}},wx2,wy2)
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_ae99e8f063b011dafba65cd94236b07b9}{xt}} = fliplr(xt)
\item 
\mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} \mbox{\hyperlink{cornerfinder__saddle__point_8m_a75b99d0a605da4afa0eddc363d406fdb}{nargin$<$ 4, winty=5;if nargin$<$ 3, wintx=5;end;end;if nargin$<$ 6, wx2=-\/1;wy2=-\/1;end;\%mask=ones(2 $\ast$wintx+1, 2 $\ast$winty+1);mask=exp(-\/((-\/wintx\+:wintx)\textquotesingle{}/(wintx)).$^\wedge$2) $\ast$exp(-\/((-\/winty\+:winty)/(winty)).$^\wedge$2);if(wx2 $>$0) \&(wy2 $>$0), if((wintx -\/ wx2)$>$=2)\&((winty -\/ wy2)$>$=2), mask(wintx+1-\/wx2\+:wintx+1+wx2, winty+1-\/wy2\+:winty+1+wy2)=zeros(2 $\ast$wx2+1, 2 $\ast$wy2+1);end;end;offx=\mbox{[}-\/wintx\+:wintx\mbox{]}\textquotesingle{} $\ast$ones(1, 2 $\ast$winty+1);offy=ones(2 $\ast$wintx+1, 1) $\ast$\mbox{[}-\/winty\+:winty\mbox{]};resolution=0.\+005;\+Max\+Iter=10;\mbox{[}nx, ny\mbox{]}=size(\+I);\+N=size(xt, 1);xc=xt;\% first guess... they don \textquotesingle{}t move !!!type=zeros(1, N);for i=1\+:\+N, v\+\_\+extra=resolution+1;\% just larger than resolution compt=0;\% no iteration yet while(norm(v\+\_\+extra) $>$ resolution) \&(compt$<$ Max\+Iter), c\+Ix=xc(i, 1);\% c\+Iy=xc(i, 2);\% Coords. of the point cr\+Ix=round(c\+Ix);\% on the initial image cr\+Iy=round(c\+Iy);\% it\+Ix=c\+Ix -\/ cr\+Ix;\% Coefficients it\+Iy=c\+Iy -\/ cr\+Iy;\% to compute if it\+Ix $>$ 0, \% the sub pixel v\+Ix=\mbox{[}it\+Ix 1-\/it\+Ix 0\mbox{]}\textquotesingle{};\% accuracy. else v\+Ix=\mbox{[}0 1+it\+Ix -\/it\+Ix\mbox{]}\textquotesingle{};end;if it\+Iy $>$ 0, v\+Iy=\mbox{[}it\+Iy 1-\/it\+Iy 0\mbox{]};else v\+Iy=\mbox{[}0 1+it\+Iy -\/it\+Iy\mbox{]};end;\% What if the sub image is not in? if(cr\+Ix-\/wintx-\/2$<$ 1), xmin=1;xmax=2 $\ast$wintx+5;elseif(cr\+Ix+wintx+2 $>$ nx), xmax=nx;xmin=nx-\/2 $\ast$wintx-\/4;else xmin=cr\+Ix-\/wintx-\/2;xmax=cr\+Ix+wintx+2;end;if(cr\+Iy-\/winty-\/2$<$ 1), ymin=1;ymax=2 $\ast$winty+5;elseif(cr\+Iy+winty+2 $>$ ny), ymax=ny;ymin=ny-\/2 $\ast$winty-\/4;else ymin=cr\+Iy-\/winty-\/2;ymax=cr\+Iy+winty+2;end;\+S\+I=\+I(xmin\+:xmax, ymin\+:ymax);\% The necessary neighborhood S\+I=conv2(conv2(\+S\+I, v\+Ix, \textquotesingle{}same\textquotesingle{}), v\+Iy, \textquotesingle{}same\textquotesingle{});\+S\+I=\+S\+I(2\+:2 $\ast$wintx+4, 2\+:2 $\ast$winty+4);\% The subpixel interpolated neighborhood px=c\+Ix+offx;py=c\+Iy+offy;if 1, \%$\sim$saddle, \mbox{[}gy, gx\mbox{]}=gradient(\+S\+I);\% The gradient image gx=gx(2\+:2 $\ast$wintx+2, 2\+:2 $\ast$winty+2);\% extraction of the useful parts only gy=gy(2\+:2 $\ast$wintx+2, 2\+:2 $\ast$winty+2);\% of the gradients gxx=gx .$\ast$gx .$\ast$mask;gyy=gy .$\ast$gy .$\ast$mask;gxy=gx .$\ast$gy .$\ast$mask;bb=\mbox{[}sum(sum(gxx .$\ast$px+gxy .$\ast$py));sum(sum(gxy .$\ast$px+gyy .$\ast$py))\mbox{]};a=sum(sum(gxx));b=sum(sum(gxy));c=sum(sum(gyy));dt=a $\ast$c -\/ b$^\wedge$2;xc2=\mbox{[}c $\ast$bb(1) -\/b $\ast$bb(2) a $\ast$bb(2) -\/b $\ast$bb(1)\mbox{]}/dt;else S\+I=\+S\+I(2\+:2 $\ast$wintx+2, 2\+:2 $\ast$winty+2);\+A=repmat(mask(\+:), 1, 6) .$\ast$\mbox{[}px(\+:).$^\wedge$2 px(\+:).$\ast$py(\+:) py(\+:).$^\wedge$2 px(\+:) py(\+:) ones((2 $\ast$wintx+1) $\ast$(2 $\ast$winty+1), 1)\mbox{]};param=inv(\+A\textquotesingle{} $\ast$\+A) $\ast$\+A\textquotesingle{} $\ast$(mask(\+:).$\ast$\+S\+I(\+:));xc2=(-\/inv(\mbox{[}2 $\ast$param(1) param(2) ;param(2) 2 $\ast$param(3)\mbox{]}) $\ast$param(4\+:5))\textquotesingle{};end;v\+\_\+extra=xc(i,\+:) -\/ xc2;xc(i,\+:)=xc2;compt=compt+1;end;if 1, c\+Ix=xc(i, 1);\% c\+Iy=xc(i, 2);\% Coords. of the point cr\+Ix=round(c\+Ix);\% on the initial image cr\+Iy=round(c\+Iy);\% it\+Ix=c\+Ix -\/ cr\+Ix;\% Coefficients it\+Iy=c\+Iy -\/ cr\+Iy;\% to compute if it\+Ix $>$}}
\item 
\mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} the sub pixel \mbox{\hyperlink{cornerfinder__saddle__point_8m_af9023cb1de60b857310aedef005fa797}{v\+Ix}} = \mbox{[}it\+Ix 1-\/it\+Ix 0\mbox{]}\textquotesingle{}
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_afb358f48b1646c750fb9da6c6585be2b}{end}}
\item 
\mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} \mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}}
\item 
\mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} \mbox{\hyperlink{cornerfinder__saddle__point_8m_af78ee5dddd0ca0db7791f30dab64dda4}{v\+Iy}} = \mbox{[}\mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}} 1-\/\mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}} 0\mbox{]}
\item 
What \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} the sub \mbox{\hyperlink{script__fit__distortion_8m_ac8a8411243371a1be29a938cf1c083fb}{image}} \mbox{\hyperlink{go__calib__optim__iter__weak_8m_a00d9614e711bf169f15ae8e3e35d30df}{is}} not in \mbox{\hyperlink{cornerfinder__saddle__point_8m_a5cebf6c66aa9ad1f352db36f41e81036}{xmin}} =1
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_aaa545f09e6592c936f524ca484584c28}{xmax}} = 2$\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+5
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a2d98da502a985371babc8e0230b0a536}{ymin}} =1
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_aa2b7f6145d75dc845bff0f00c6452e54}{ymax}} = 2$\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+5
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}} = \mbox{\hyperlink{mosaic__no__read_8m_a2519f364506853a3dad3e65e1df67c13}{I}}(xmin\+:xmax,ymin\+:ymax)
\item 
The subpixel interpolated neighborhood \mbox{\hyperlink{cornerfinder__saddle__point_8m_a4f50f400529be4f289ee7109bf3d0ccf}{px}} = c\+Ix + offx
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}} = c\+Iy + offy
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}} = repmat(\mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}(\+:),1,6) .$\ast$ \mbox{[}\mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}(\+:).$^\wedge$2 \mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}(\+:).$\ast$\mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}(\+:) \mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}(\+:).$^\wedge$2 \mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}(\+:) \mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}(\+:) \mbox{\hyperlink{visualize__distortions_8m_a45582fcee3c7b631afa5f55a959b0c13}{ones}}((2$\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+1)$\ast$(2$\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+1),1)\mbox{]}
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a51f20d6b1b54a2eee3be0e8adc96a0ae}{param}} = inv(\mbox{\hyperlink{rodrigues_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}}\textquotesingle{}$\ast$\mbox{\hyperlink{rodrigues_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}})$\ast$\mbox{\hyperlink{rodrigues_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}}\textquotesingle{}$\ast$( \mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}(\+:).$\ast$\mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}(\+:))
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_afff7195fd727c87c72bd430c656316d8}{xc2}} = (-\/inv(\mbox{[}2$\ast$\mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(1) \mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(2) ; \mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(2) 2$\ast$\mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(3) \mbox{]}) $\ast$ \mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(4\+:5))\textquotesingle{}
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a30a82f4324aeecaf1bcb5082c06f5949}{v\+\_\+extra}} = \mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}(\mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}},\+:) -\/ \mbox{\hyperlink{edgefinder_8m_a5a62ce42cd1ef02cb40975ee06079645}{xc2}}
\item 
check for \mbox{\hyperlink{_distor2_calib_8m_ad356fab1d96159f7b2452bde706a9719}{points}} \mbox{\hyperlink{readras_8m_a7d252fd4b4ae9c8b8af5e91ef645fc1f}{that}} \mbox{\hyperlink{cornerfinder__saddle__point_8m_a85b6468f464f82df2d69142949d54898}{diverge}}
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_ab73d44f0e0438d419515ff3eaad55257}{delta\+\_\+y}} = \mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}(\+:,2) -\/ \mbox{\hyperlink{stereo__triangulation_8m_ab3c554be4c0e54bab5c9b00203de4941}{xt}}(\+:,2)
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a9976f3faad68f981f425583e48b03252}{keyboard}}
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_ae83cfa749a6be0414f9fc8b0edb52e4e}{bad}} = (\mbox{\hyperlink{count__squares_8m_ae1706a9f90c377dc4cd30360d9a1af0e}{abs}}(\mbox{\hyperlink{project__points2_8m_a16df747e4f6ab54d4c189551f5ee570d}{delta\+\_\+x}}) $>$ \mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}) $\vert$ (\mbox{\hyperlink{count__squares_8m_ae1706a9f90c377dc4cd30360d9a1af0e}{abs}}(\mbox{\hyperlink{edgefinder_8m_ab73d44f0e0438d419515ff3eaad55257}{delta\+\_\+y}}) $>$ \mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}})
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_a16f85293e920fd49eda6bf0df98bfd33}{good}} = $\sim$\mbox{\hyperlink{edgefinder_8m_ae83cfa749a6be0414f9fc8b0edb52e4e}{bad}}
\item 
\mbox{\hyperlink{cornerfinder__saddle__point_8m_af225dab14ea0fba9687b9fef7d3d299a}{in\+\_\+bad}} = find(\mbox{\hyperlink{edgefinder_8m_ae83cfa749a6be0414f9fc8b0edb52e4e}{bad}})
\item 
For the diverged \mbox{\hyperlink{cornerfinder__saddle__point_8m_ad72dfc94795e93b959508fd8af2bd3d7}{points}}
\item 
For the diverged keep the original \mbox{\hyperlink{cornerfinder__saddle__point_8m_a4f17773ff6ab978922183f94685d7a76}{guesses}}
\item 
For the diverged keep the original \mbox{\hyperlink{cornerfinder__saddle__point_8m_a8ecf39fb02bd311cd04c72d89cbfb6d7}{xc}} = fliplr(xc)
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a86b655300f1b0c5f9e3b454596e0b864}\label{cornerfinder__saddle__point_8m_a86b655300f1b0c5f9e3b454596e0b864}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!elseif@{elseif}}
\index{elseif@{elseif}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{elseif()}{elseif()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily elseif (\begin{DoxyParamCaption}\item[{cr\+Ix+\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+}]{2,  }\item[{\mbox{\hyperlink{willson__read_8m_a2f6e152702d97ea3f1b96a6e2e2b9687}{nx}}}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a88c489c3611424933ccaa5fb9bd8d384}\label{cornerfinder__saddle__point_8m_a88c489c3611424933ccaa5fb9bd8d384}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!elseif@{elseif}}
\index{elseif@{elseif}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{elseif()}{elseif()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily elseif (\begin{DoxyParamCaption}\item[{cr\+Iy+\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+}]{2,  }\item[{\mbox{\hyperlink{willson__read_8m_a2f43d084523823503800b3a4a5d309ca}{ny}}}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a82f680e0907baa62a1b874d8e7a20f06}\label{cornerfinder__saddle__point_8m_a82f680e0907baa62a1b874d8e7a20f06}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!if@{if}}
\index{if@{if}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{if()}{if()}}
{\footnotesize\ttfamily What if the sub \mbox{\hyperlink{script__fit__distortion_8m_ac8a8411243371a1be29a938cf1c083fb}{image}} \mbox{\hyperlink{go__calib__optim__iter__weak_8m_a00d9614e711bf169f15ae8e3e35d30df}{is}} not in if (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a749ccdd6d57b26d9a867b35a5f7a1d09}\label{cornerfinder__saddle__point_8m_a749ccdd6d57b26d9a867b35a5f7a1d09}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!points:@{points:}}
\index{points:@{points:}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{points:()}{points:()}}
{\footnotesize\ttfamily vertical points\+: (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{runme_8m_aa49cfdd4fa4d74d71f78a001a1b635d0}{c}}}]{xt }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a4b9e3580e8976217fce1afe54cb77649}\label{cornerfinder__saddle__point_8m_a4b9e3580e8976217fce1afe54cb77649}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!xc@{xc}}
\index{xc@{xc}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{xc()}{xc()}}
{\footnotesize\ttfamily xc (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}}}]{,  }\item[{\+:}]{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_aa3181c106286f3bbfc446d708d9b1544}\label{cornerfinder__saddle__point_8m_aa3181c106286f3bbfc446d708d9b1544}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!xt@{xt}}
\index{xt@{xt}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{xt()}{xt()}}
{\footnotesize\ttfamily \+:,1 xt (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}\label{cornerfinder__saddle__point_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!A@{A}}
\index{A@{A}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{A}{A}}
{\footnotesize\ttfamily A = repmat(\mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}(\+:),1,6) .$\ast$ \mbox{[}\mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}(\+:).$^\wedge$2 \mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}(\+:).$\ast$\mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}(\+:) \mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}(\+:).$^\wedge$2 \mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}(\+:) \mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}(\+:) \mbox{\hyperlink{visualize__distortions_8m_a45582fcee3c7b631afa5f55a959b0c13}{ones}}((2$\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+1)$\ast$(2$\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+1),1)\mbox{]}}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_ae83cfa749a6be0414f9fc8b0edb52e4e}\label{cornerfinder__saddle__point_8m_ae83cfa749a6be0414f9fc8b0edb52e4e}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!bad@{bad}}
\index{bad@{bad}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{bad}{bad}}
{\footnotesize\ttfamily bad = (\mbox{\hyperlink{count__squares_8m_ae1706a9f90c377dc4cd30360d9a1af0e}{abs}}(\mbox{\hyperlink{project__points2_8m_a16df747e4f6ab54d4c189551f5ee570d}{delta\+\_\+x}}) $>$ \mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}) $\vert$ (\mbox{\hyperlink{count__squares_8m_ae1706a9f90c377dc4cd30360d9a1af0e}{abs}}(\mbox{\hyperlink{edgefinder_8m_ab73d44f0e0438d419515ff3eaad55257}{delta\+\_\+y}}) $>$ \mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}})}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_ab73d44f0e0438d419515ff3eaad55257}\label{cornerfinder__saddle__point_8m_ab73d44f0e0438d419515ff3eaad55257}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!delta\_y@{delta\_y}}
\index{delta\_y@{delta\_y}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{delta\_y}{delta\_y}}
{\footnotesize\ttfamily delta\+\_\+y = \mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}(\+:,2) -\/ \mbox{\hyperlink{stereo__triangulation_8m_ab3c554be4c0e54bab5c9b00203de4941}{xt}}(\+:,2)}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a85b6468f464f82df2d69142949d54898}\label{cornerfinder__saddle__point_8m_a85b6468f464f82df2d69142949d54898}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!diverge@{diverge}}
\index{diverge@{diverge}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{diverge}{diverge}}
{\footnotesize\ttfamily check for \mbox{\hyperlink{_distor2_calib_8m_ad356fab1d96159f7b2452bde706a9719}{points}} \mbox{\hyperlink{readras_8m_a7d252fd4b4ae9c8b8af5e91ef645fc1f}{that}} diverge}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_afb358f48b1646c750fb9da6c6585be2b}\label{cornerfinder__saddle__point_8m_afb358f48b1646c750fb9da6c6585be2b}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!end@{end}}
\index{end@{end}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{end}{end}}
{\footnotesize\ttfamily end}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a342971ae976e878b9741be4650e99c6c}\label{cornerfinder__saddle__point_8m_a342971ae976e878b9741be4650e99c6c}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!function@{function}}
\index{function@{function}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{function}{function}}
{\footnotesize\ttfamily function\mbox{[}\mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}, \mbox{\hyperlink{edgefinder_8m_a16f85293e920fd49eda6bf0df98bfd33}{good}}, \mbox{\hyperlink{edgefinder_8m_ae83cfa749a6be0414f9fc8b0edb52e4e}{bad}}, \mbox{\hyperlink{readras_8m_a7aead736a07eaf25623ad7bfa1f0ee2d}{type}}\mbox{]} = cornerfinder\+\_\+saddle\+\_\+point(\mbox{\hyperlink{stereo__triangulation_8m_ab3c554be4c0e54bab5c9b00203de4941}{xt}},\mbox{\hyperlink{mosaic__no__read_8m_a2519f364506853a3dad3e65e1df67c13}{I}},\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}},\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}},wx2,wy2)}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a16f85293e920fd49eda6bf0df98bfd33}\label{cornerfinder__saddle__point_8m_a16f85293e920fd49eda6bf0df98bfd33}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!good@{good}}
\index{good@{good}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{good}{good}}
{\footnotesize\ttfamily good = $\sim$\mbox{\hyperlink{edgefinder_8m_ae83cfa749a6be0414f9fc8b0edb52e4e}{bad}}}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a4f17773ff6ab978922183f94685d7a76}\label{cornerfinder__saddle__point_8m_a4f17773ff6ab978922183f94685d7a76}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!guesses@{guesses}}
\index{guesses@{guesses}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{guesses}{guesses}}
{\footnotesize\ttfamily For the diverged keep the original guesses}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_af225dab14ea0fba9687b9fef7d3d299a}\label{cornerfinder__saddle__point_8m_af225dab14ea0fba9687b9fef7d3d299a}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!in\_bad@{in\_bad}}
\index{in\_bad@{in\_bad}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{in\_bad}{in\_bad}}
{\footnotesize\ttfamily in\+\_\+bad = find(\mbox{\hyperlink{edgefinder_8m_ae83cfa749a6be0414f9fc8b0edb52e4e}{bad}})}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}\label{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!itIy@{itIy}}
\index{itIy@{itIy}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{itIy}{itIy}}
{\footnotesize\ttfamily \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} it\+Iy}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a9976f3faad68f981f425583e48b03252}\label{cornerfinder__saddle__point_8m_a9976f3faad68f981f425583e48b03252}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!keyboard@{keyboard}}
\index{keyboard@{keyboard}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{keyboard}{keyboard}}
{\footnotesize\ttfamily keyboard}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a75b99d0a605da4afa0eddc363d406fdb}\label{cornerfinder__saddle__point_8m_a75b99d0a605da4afa0eddc363d406fdb}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!nargin$<$ 4, winty=5;if nargin$<$ 3, wintx=5;end;end;if nargin$<$ 6, wx2=-\/1;wy2=-\/1;end;\%mask=ones(2 $\ast$wintx+1, 2 $\ast$winty+1);mask=exp(-\/((-\/wintx:wintx)\textquotesingle{}/(wintx)).$^\wedge$2) $\ast$exp(-\/((-\/winty:winty)/(winty)).$^\wedge$2);if(wx2 $>$0) \&(wy2 $>$0), if((wintx -\/ wx2)$>$=2)\&((winty -\/ wy2)$>$=2), mask(wintx+1-\/wx2:wintx+1+wx2, winty+1-\/wy2:winty+1+wy2)=zeros(2 $\ast$wx2+1, 2 $\ast$wy2+1);end;end;offx=\mbox{[}-\/wintx:wintx\mbox{]}\textquotesingle{} $\ast$ones(1, 2 $\ast$winty+1);offy=ones(2 $\ast$wintx+1, 1) $\ast$\mbox{[}-\/winty:winty\mbox{]};resolution=0.005;MaxIter=10;\mbox{[}nx, ny\mbox{]}=size(I);N=size(xt, 1);xc=xt;\% first guess... they don \textquotesingle{}t move "!"!"!type=zeros(1, N);for i=1:N, v\_extra=resolution+1;\% just larger than resolution compt=0;\% no iteration yet while(norm(v\_extra) $>$ resolution) \&(compt$<$ MaxIter), cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx -\/ crIx;\% Coefficients itIy=cIy -\/ crIy;\% to compute if itIx $>$ 0, \% the sub pixel vIx=\mbox{[}itIx 1-\/itIx 0\mbox{]}\textquotesingle{};\% accuracy. else vIx=\mbox{[}0 1+itIx -\/itIx\mbox{]}\textquotesingle{};end;if itIy $>$ 0, vIy=\mbox{[}itIy 1-\/itIy 0\mbox{]};else vIy=\mbox{[}0 1+itIy -\/itIy\mbox{]};end;\% What if the sub image is not in? if(crIx-\/wintx-\/2$<$ 1), xmin=1;xmax=2 $\ast$wintx+5;elseif(crIx+wintx+2 $>$ nx), xmax=nx;xmin=nx-\/2 $\ast$wintx-\/4;else xmin=crIx-\/wintx-\/2;xmax=crIx+wintx+2;end;if(crIy-\/winty-\/2$<$ 1), ymin=1;ymax=2 $\ast$winty+5;elseif(crIy+winty+2 $>$ ny), ymax=ny;ymin=ny-\/2 $\ast$winty-\/4;else ymin=crIy-\/winty-\/2;ymax=crIy+winty+2;end;SI=I(xmin:xmax, ymin:ymax);\% The necessary neighborhood SI=conv2(conv2(SI, vIx, \textquotesingle{}same\textquotesingle{}), vIy, \textquotesingle{}same\textquotesingle{});SI=SI(2:2 $\ast$wintx+4, 2:2 $\ast$winty+4);\% The subpixel interpolated neighborhood px=cIx+offx;py=cIy+offy;if 1, \%$\sim$saddle, \mbox{[}gy, gx\mbox{]}=gradient(SI);\% The gradient image gx=gx(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);\% extraction of the useful parts only gy=gy(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);\% of the gradients gxx=gx .$\ast$gx .$\ast$mask;gyy=gy .$\ast$gy .$\ast$mask;gxy=gx .$\ast$gy .$\ast$mask;bb=\mbox{[}sum(sum(gxx .$\ast$px+gxy .$\ast$py));sum(sum(gxy .$\ast$px+gyy .$\ast$py))\mbox{]};a=sum(sum(gxx));b=sum(sum(gxy));c=sum(sum(gyy));dt=a $\ast$c -\/ b$^\wedge$2;xc2=\mbox{[}c $\ast$bb(1) -\/b $\ast$bb(2) a $\ast$bb(2) -\/b $\ast$bb(1)\mbox{]}/dt;else SI=SI(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);A=repmat(mask(:), 1, 6) .$\ast$\mbox{[}px(:).$^\wedge$2 px(:).$\ast$py(:) py(:).$^\wedge$2 px(:) py(:) ones((2 $\ast$wintx+1) $\ast$(2 $\ast$winty+1), 1)\mbox{]};param=inv(A\textquotesingle{} $\ast$A) $\ast$A\textquotesingle{} $\ast$(mask(:).$\ast$SI(:));xc2=(-\/inv(\mbox{[}2 $\ast$param(1) param(2) ;param(2) 2 $\ast$param(3)\mbox{]}) $\ast$param(4:5))\textquotesingle{};end;v\_extra=xc(i,:) -\/ xc2;xc(i,:)=xc2;compt=compt+1;end;if 1, cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx -\/ crIx;\% Coefficients itIy=cIy -\/ crIy;\% to compute if itIx $>$@{nargin$<$ 4, winty=5;if nargin$<$ 3, wintx=5;end;end;if nargin$<$ 6, wx2=-\/1;wy2=-\/1;end;\%mask=ones(2 $\ast$wintx+1, 2 $\ast$winty+1);mask=exp(-\/((-\/wintx:wintx)\textquotesingle{}/(wintx)).$^\wedge$2) $\ast$exp(-\/((-\/winty:winty)/(winty)).$^\wedge$2);if(wx2 $>$0) \&(wy2 $>$0), if((wintx -\/ wx2)$>$=2)\&((winty -\/ wy2)$>$=2), mask(wintx+1-\/wx2:wintx+1+wx2, winty+1-\/wy2:winty+1+wy2)=zeros(2 $\ast$wx2+1, 2 $\ast$wy2+1);end;end;offx=[-\/wintx:wintx]\textquotesingle{} $\ast$ones(1, 2 $\ast$winty+1);offy=ones(2 $\ast$wintx+1, 1) $\ast$[-\/winty:winty];resolution=0.005;MaxIter=10;[nx, ny]=size(I);N=size(xt, 1);xc=xt;\% first guess... they don \textquotesingle{}t move "!"!"!type=zeros(1, N);for i=1:N, v\_extra=resolution+1;\% just larger than resolution compt=0;\% no iteration yet while(norm(v\_extra) $>$ resolution) \&(compt$<$ MaxIter), cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx -\/ crIx;\% Coefficients itIy=cIy -\/ crIy;\% to compute if itIx $>$ 0, \% the sub pixel vIx=[itIx 1-\/itIx 0]\textquotesingle{};\% accuracy. else vIx=[0 1+itIx -\/itIx]\textquotesingle{};end;if itIy $>$ 0, vIy=[itIy 1-\/itIy 0];else vIy=[0 1+itIy -\/itIy];end;\% What if the sub image is not in? if(crIx-\/wintx-\/2$<$ 1), xmin=1;xmax=2 $\ast$wintx+5;elseif(crIx+wintx+2 $>$ nx), xmax=nx;xmin=nx-\/2 $\ast$wintx-\/4;else xmin=crIx-\/wintx-\/2;xmax=crIx+wintx+2;end;if(crIy-\/winty-\/2$<$ 1), ymin=1;ymax=2 $\ast$winty+5;elseif(crIy+winty+2 $>$ ny), ymax=ny;ymin=ny-\/2 $\ast$winty-\/4;else ymin=crIy-\/winty-\/2;ymax=crIy+winty+2;end;SI=I(xmin:xmax, ymin:ymax);\% The necessary neighborhood SI=conv2(conv2(SI, vIx, \textquotesingle{}same\textquotesingle{}), vIy, \textquotesingle{}same\textquotesingle{});SI=SI(2:2 $\ast$wintx+4, 2:2 $\ast$winty+4);\% The subpixel interpolated neighborhood px=cIx+offx;py=cIy+offy;if 1, \%$\sim$saddle, [gy, gx]=gradient(SI);\% The gradient image gx=gx(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);\% extraction of the useful parts only gy=gy(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);\% of the gradients gxx=gx .$\ast$gx .$\ast$mask;gyy=gy .$\ast$gy .$\ast$mask;gxy=gx .$\ast$gy .$\ast$mask;bb=[sum(sum(gxx .$\ast$px+gxy .$\ast$py));sum(sum(gxy .$\ast$px+gyy .$\ast$py))];a=sum(sum(gxx));b=sum(sum(gxy));c=sum(sum(gyy));dt=a $\ast$c -\/ b$^\wedge$2;xc2=[c $\ast$bb(1) -\/b $\ast$bb(2) a $\ast$bb(2) -\/b $\ast$bb(1)]/dt;else SI=SI(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);A=repmat(mask(:), 1, 6) .$\ast$[px(:).$^\wedge$2 px(:).$\ast$py(:) py(:).$^\wedge$2 px(:) py(:) ones((2 $\ast$wintx+1) $\ast$(2 $\ast$winty+1), 1)];param=inv(A\textquotesingle{} $\ast$A) $\ast$A\textquotesingle{} $\ast$(mask(:).$\ast$SI(:));xc2=(-\/inv([2 $\ast$param(1) param(2) ;param(2) 2 $\ast$param(3)]) $\ast$param(4:5))\textquotesingle{};end;v\_extra=xc(i,:) -\/ xc2;xc(i,:)=xc2;compt=compt+1;end;if 1, cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx -\/ crIx;\% Coefficients itIy=cIy -\/ crIy;\% to compute if itIx $>$}}
\index{nargin$<$ 4, winty=5;if nargin$<$ 3, wintx=5;end;end;if nargin$<$ 6, wx2=-\/1;wy2=-\/1;end;\%mask=ones(2 $\ast$wintx+1, 2 $\ast$winty+1);mask=exp(-\/((-\/wintx:wintx)\textquotesingle{}/(wintx)).$^\wedge$2) $\ast$exp(-\/((-\/winty:winty)/(winty)).$^\wedge$2);if(wx2 $>$0) \&(wy2 $>$0), if((wintx -\/ wx2)$>$=2)\&((winty -\/ wy2)$>$=2), mask(wintx+1-\/wx2:wintx+1+wx2, winty+1-\/wy2:winty+1+wy2)=zeros(2 $\ast$wx2+1, 2 $\ast$wy2+1);end;end;offx=\mbox{[}-\/wintx:wintx\mbox{]}\textquotesingle{} $\ast$ones(1, 2 $\ast$winty+1);offy=ones(2 $\ast$wintx+1, 1) $\ast$\mbox{[}-\/winty:winty\mbox{]};resolution=0.005;MaxIter=10;\mbox{[}nx, ny\mbox{]}=size(I);N=size(xt, 1);xc=xt;\% first guess... they don \textquotesingle{}t move "!"!"!type=zeros(1, N);for i=1:N, v\_extra=resolution+1;\% just larger than resolution compt=0;\% no iteration yet while(norm(v\_extra) $>$ resolution) \&(compt$<$ MaxIter), cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx -\/ crIx;\% Coefficients itIy=cIy -\/ crIy;\% to compute if itIx $>$ 0, \% the sub pixel vIx=\mbox{[}itIx 1-\/itIx 0\mbox{]}\textquotesingle{};\% accuracy. else vIx=\mbox{[}0 1+itIx -\/itIx\mbox{]}\textquotesingle{};end;if itIy $>$ 0, vIy=\mbox{[}itIy 1-\/itIy 0\mbox{]};else vIy=\mbox{[}0 1+itIy -\/itIy\mbox{]};end;\% What if the sub image is not in? if(crIx-\/wintx-\/2$<$ 1), xmin=1;xmax=2 $\ast$wintx+5;elseif(crIx+wintx+2 $>$ nx), xmax=nx;xmin=nx-\/2 $\ast$wintx-\/4;else xmin=crIx-\/wintx-\/2;xmax=crIx+wintx+2;end;if(crIy-\/winty-\/2$<$ 1), ymin=1;ymax=2 $\ast$winty+5;elseif(crIy+winty+2 $>$ ny), ymax=ny;ymin=ny-\/2 $\ast$winty-\/4;else ymin=crIy-\/winty-\/2;ymax=crIy+winty+2;end;SI=I(xmin:xmax, ymin:ymax);\% The necessary neighborhood SI=conv2(conv2(SI, vIx, \textquotesingle{}same\textquotesingle{}), vIy, \textquotesingle{}same\textquotesingle{});SI=SI(2:2 $\ast$wintx+4, 2:2 $\ast$winty+4);\% The subpixel interpolated neighborhood px=cIx+offx;py=cIy+offy;if 1, \%$\sim$saddle, \mbox{[}gy, gx\mbox{]}=gradient(SI);\% The gradient image gx=gx(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);\% extraction of the useful parts only gy=gy(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);\% of the gradients gxx=gx .$\ast$gx .$\ast$mask;gyy=gy .$\ast$gy .$\ast$mask;gxy=gx .$\ast$gy .$\ast$mask;bb=\mbox{[}sum(sum(gxx .$\ast$px+gxy .$\ast$py));sum(sum(gxy .$\ast$px+gyy .$\ast$py))\mbox{]};a=sum(sum(gxx));b=sum(sum(gxy));c=sum(sum(gyy));dt=a $\ast$c -\/ b$^\wedge$2;xc2=\mbox{[}c $\ast$bb(1) -\/b $\ast$bb(2) a $\ast$bb(2) -\/b $\ast$bb(1)\mbox{]}/dt;else SI=SI(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);A=repmat(mask(:), 1, 6) .$\ast$\mbox{[}px(:).$^\wedge$2 px(:).$\ast$py(:) py(:).$^\wedge$2 px(:) py(:) ones((2 $\ast$wintx+1) $\ast$(2 $\ast$winty+1), 1)\mbox{]};param=inv(A\textquotesingle{} $\ast$A) $\ast$A\textquotesingle{} $\ast$(mask(:).$\ast$SI(:));xc2=(-\/inv(\mbox{[}2 $\ast$param(1) param(2) ;param(2) 2 $\ast$param(3)\mbox{]}) $\ast$param(4:5))\textquotesingle{};end;v\_extra=xc(i,:) -\/ xc2;xc(i,:)=xc2;compt=compt+1;end;if 1, cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx -\/ crIx;\% Coefficients itIy=cIy -\/ crIy;\% to compute if itIx $>$@{nargin$<$ 4, winty=5;if nargin$<$ 3, wintx=5;end;end;if nargin$<$ 6, wx2=-\/1;wy2=-\/1;end;\%mask=ones(2 $\ast$wintx+1, 2 $\ast$winty+1);mask=exp(-\/((-\/wintx:wintx)\textquotesingle{}/(wintx)).$^\wedge$2) $\ast$exp(-\/((-\/winty:winty)/(winty)).$^\wedge$2);if(wx2 $>$0) \&(wy2 $>$0), if((wintx -\/ wx2)$>$=2)\&((winty -\/ wy2)$>$=2), mask(wintx+1-\/wx2:wintx+1+wx2, winty+1-\/wy2:winty+1+wy2)=zeros(2 $\ast$wx2+1, 2 $\ast$wy2+1);end;end;offx=[-\/wintx:wintx]\textquotesingle{} $\ast$ones(1, 2 $\ast$winty+1);offy=ones(2 $\ast$wintx+1, 1) $\ast$[-\/winty:winty];resolution=0.005;MaxIter=10;[nx, ny]=size(I);N=size(xt, 1);xc=xt;\% first guess... they don \textquotesingle{}t move "!"!"!type=zeros(1, N);for i=1:N, v\_extra=resolution+1;\% just larger than resolution compt=0;\% no iteration yet while(norm(v\_extra) $>$ resolution) \&(compt$<$ MaxIter), cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx -\/ crIx;\% Coefficients itIy=cIy -\/ crIy;\% to compute if itIx $>$ 0, \% the sub pixel vIx=[itIx 1-\/itIx 0]\textquotesingle{};\% accuracy. else vIx=[0 1+itIx -\/itIx]\textquotesingle{};end;if itIy $>$ 0, vIy=[itIy 1-\/itIy 0];else vIy=[0 1+itIy -\/itIy];end;\% What if the sub image is not in? if(crIx-\/wintx-\/2$<$ 1), xmin=1;xmax=2 $\ast$wintx+5;elseif(crIx+wintx+2 $>$ nx), xmax=nx;xmin=nx-\/2 $\ast$wintx-\/4;else xmin=crIx-\/wintx-\/2;xmax=crIx+wintx+2;end;if(crIy-\/winty-\/2$<$ 1), ymin=1;ymax=2 $\ast$winty+5;elseif(crIy+winty+2 $>$ ny), ymax=ny;ymin=ny-\/2 $\ast$winty-\/4;else ymin=crIy-\/winty-\/2;ymax=crIy+winty+2;end;SI=I(xmin:xmax, ymin:ymax);\% The necessary neighborhood SI=conv2(conv2(SI, vIx, \textquotesingle{}same\textquotesingle{}), vIy, \textquotesingle{}same\textquotesingle{});SI=SI(2:2 $\ast$wintx+4, 2:2 $\ast$winty+4);\% The subpixel interpolated neighborhood px=cIx+offx;py=cIy+offy;if 1, \%$\sim$saddle, [gy, gx]=gradient(SI);\% The gradient image gx=gx(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);\% extraction of the useful parts only gy=gy(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);\% of the gradients gxx=gx .$\ast$gx .$\ast$mask;gyy=gy .$\ast$gy .$\ast$mask;gxy=gx .$\ast$gy .$\ast$mask;bb=[sum(sum(gxx .$\ast$px+gxy .$\ast$py));sum(sum(gxy .$\ast$px+gyy .$\ast$py))];a=sum(sum(gxx));b=sum(sum(gxy));c=sum(sum(gyy));dt=a $\ast$c -\/ b$^\wedge$2;xc2=[c $\ast$bb(1) -\/b $\ast$bb(2) a $\ast$bb(2) -\/b $\ast$bb(1)]/dt;else SI=SI(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);A=repmat(mask(:), 1, 6) .$\ast$[px(:).$^\wedge$2 px(:).$\ast$py(:) py(:).$^\wedge$2 px(:) py(:) ones((2 $\ast$wintx+1) $\ast$(2 $\ast$winty+1), 1)];param=inv(A\textquotesingle{} $\ast$A) $\ast$A\textquotesingle{} $\ast$(mask(:).$\ast$SI(:));xc2=(-\/inv([2 $\ast$param(1) param(2) ;param(2) 2 $\ast$param(3)]) $\ast$param(4:5))\textquotesingle{};end;v\_extra=xc(i,:) -\/ xc2;xc(i,:)=xc2;compt=compt+1;end;if 1, cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx -\/ crIx;\% Coefficients itIy=cIy -\/ crIy;\% to compute if itIx $>$}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{nargin$<$ 4, winty=5;if nargin$<$ 3, wintx=5;end;end;if nargin$<$ 6, wx2=-\/1;wy2=-\/1;end;\%mask=ones(2 $\ast$wintx+1, 2 $\ast$winty+1);mask=exp(-\/((-\/wintx:wintx)\textquotesingle{}/(wintx)).$^\wedge$2) $\ast$exp(-\/((-\/winty:winty)/(winty)).$^\wedge$2);if(wx2 $>$0) \&(wy2 $>$0), if((wintx -\/ wx2)$>$=2)\&((winty -\/ wy2)$>$=2), mask(wintx+1-\/wx2:wintx+1+wx2, winty+1-\/wy2:winty+1+wy2)=zeros(2 $\ast$wx2+1, 2 $\ast$wy2+1);end;end;offx=[-\/wintx:wintx]\textquotesingle{} $\ast$ones(1, 2 $\ast$winty+1);offy=ones(2 $\ast$wintx+1, 1) $\ast$[-\/winty:winty];resolution=0.005;MaxIter=10;[nx, ny]=size(I);N=size(xt, 1);xc=xt;\% first guess... they don \textquotesingle{}t move "!"!"!type=zeros(1, N);for i=1:N, v\_extra=resolution+1;\% just larger than resolution compt=0;\% no iteration yet while(norm(v\_extra) $>$ resolution) \&(compt$<$ MaxIter), cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx -\/ crIx;\% Coefficients itIy=cIy -\/ crIy;\% to compute if itIx $>$ 0, \% the sub pixel vIx=[itIx 1-\/itIx 0]\textquotesingle{};\% accuracy. else vIx=[0 1+itIx -\/itIx]\textquotesingle{};end;if itIy $>$ 0, vIy=[itIy 1-\/itIy 0];else vIy=[0 1+itIy -\/itIy];end;\% What if the sub image is not in? if(crIx-\/wintx-\/2$<$ 1), xmin=1;xmax=2 $\ast$wintx+5;elseif(crIx+wintx+2 $>$ nx), xmax=nx;xmin=nx-\/2 $\ast$wintx-\/4;else xmin=crIx-\/wintx-\/2;xmax=crIx+wintx+2;end;if(crIy-\/winty-\/2$<$ 1), ymin=1;ymax=2 $\ast$winty+5;elseif(crIy+winty+2 $>$ ny), ymax=ny;ymin=ny-\/2 $\ast$winty-\/4;else ymin=crIy-\/winty-\/2;ymax=crIy+winty+2;end;SI=I(xmin:xmax, ymin:ymax);\% The necessary neighborhood SI=conv2(conv2(SI, vIx, \textquotesingle{}same\textquotesingle{}), vIy, \textquotesingle{}same\textquotesingle{});SI=SI(2:2 $\ast$wintx+4, 2:2 $\ast$winty+4);\% The subpixel interpolated neighborhood px=cIx+offx;py=cIy+offy;if 1, \%$\sim$saddle, [gy, gx]=gradient(SI);\% The gradient image gx=gx(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);\% extraction of the useful parts only gy=gy(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);\% of the gradients gxx=gx .$\ast$gx .$\ast$mask;gyy=gy .$\ast$gy .$\ast$mask;gxy=gx .$\ast$gy .$\ast$mask;bb=[sum(sum(gxx .$\ast$px+gxy .$\ast$py));sum(sum(gxy .$\ast$px+gyy .$\ast$py))];a=sum(sum(gxx));b=sum(sum(gxy));c=sum(sum(gyy));dt=a $\ast$c -\/ b$^\wedge$2;xc2=[c $\ast$bb(1) -\/b $\ast$bb(2) a $\ast$bb(2) -\/b $\ast$bb(1)]/dt;else SI=SI(2:2 $\ast$wintx+2, 2:2 $\ast$winty+2);A=repmat(mask(:), 1, 6) .$\ast$[px(:).$^\wedge$2 px(:).$\ast$py(:) py(:).$^\wedge$2 px(:) py(:) ones((2 $\ast$wintx+1) $\ast$(2 $\ast$winty+1), 1)];param=inv(A\textquotesingle{} $\ast$A) $\ast$A\textquotesingle{} $\ast$(mask(:).$\ast$SI(:));xc2=(-\/inv([2 $\ast$param(1) param(2) ;param(2) 2 $\ast$param(3)]) $\ast$param(4:5))\textquotesingle{};end;v\_extra=xc(i,:) -\/ xc2;xc(i,:)=xc2;compt=compt+1;end;if 1, cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx -\/ crIx;\% Coefficients itIy=cIy -\/ crIy;\% to compute if itIx $>$}{nargin< 4, winty=5;if nargin< 3, wintx=5;end;end;if nargin< 6, wx2=-1;wy2=-1;end;\%mask=ones(2 *wintx+1, 2 *winty+1);mask=exp(-((-wintx:wintx)'/(wintx)).^2) *exp(-((-winty:winty)/(winty)).^2);if(wx2 >0) \&(wy2 >0), if((wintx - wx2)>=2)\&((winty - wy2)>=2), mask(wintx+1-wx2:wintx+1+wx2, winty+1-wy2:winty+1+wy2)=zeros(2 *wx2+1, 2 *wy2+1);end;end;offx=[-wintx:wintx]' *ones(1, 2 *winty+1);offy=ones(2 *wintx+1, 1) *[-winty:winty];resolution=0.005;MaxIter=10;[nx, ny]=size(I);N=size(xt, 1);xc=xt;\% first guess... they don 't move !!!type=zeros(1, N);for i=1:N, v\_extra=resolution+1;\% just larger than resolution compt=0;\% no iteration yet while(norm(v\_extra) > resolution) \&(compt< MaxIter), cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx - crIx;\% Coefficients itIy=cIy - crIy;\% to compute if itIx > 0, \% the sub pixel vIx=[itIx 1-itIx 0]';\% accuracy. else vIx=[0 1+itIx -itIx]';end;if itIy > 0, vIy=[itIy 1-itIy 0];else vIy=[0 1+itIy -itIy];end;\% What if the sub image is not in? if(crIx-wintx-2< 1), xmin=1;xmax=2 *wintx+5;elseif(crIx+wintx+2 > nx), xmax=nx;xmin=nx-2 *wintx-4;else xmin=crIx-wintx-2;xmax=crIx+wintx+2;end;if(crIy-winty-2< 1), ymin=1;ymax=2 *winty+5;elseif(crIy+winty+2 > ny), ymax=ny;ymin=ny-2 *winty-4;else ymin=crIy-winty-2;ymax=crIy+winty+2;end;SI=I(xmin:xmax, ymin:ymax);\% The necessary neighborhood SI=conv2(conv2(SI, vIx, 'same'), vIy, 'same');SI=SI(2:2 *wintx+4, 2:2 *winty+4);\% The subpixel interpolated neighborhood px=cIx+offx;py=cIy+offy;if 1, \%~saddle, [gy, gx]=gradient(SI);\% The gradient image gx=gx(2:2 *wintx+2, 2:2 *winty+2);\% extraction of the useful parts only gy=gy(2:2 *wintx+2, 2:2 *winty+2);\% of the gradients gxx=gx .*gx .*mask;gyy=gy .*gy .*mask;gxy=gx .*gy .*mask;bb=[sum(sum(gxx .*px+gxy .*py));sum(sum(gxy .*px+gyy .*py))];a=sum(sum(gxx));b=sum(sum(gxy));c=sum(sum(gyy));dt=a *c - b^2;xc2=[c *bb(1) -b *bb(2) a *bb(2) -b *bb(1)]/dt;else SI=SI(2:2 *wintx+2, 2:2 *winty+2);A=repmat(mask(:), 1, 6) .*[px(:).^2 px(:).*py(:) py(:).^2 px(:) py(:) ones((2 *wintx+1) *(2 *winty+1), 1)];param=inv(A' *A) *A' *(mask(:).*SI(:));xc2=(-inv([2 *param(1) param(2) ;param(2) 2 *param(3)]) *param(4:5))';end;v\_extra=xc(i,:) - xc2;xc(i,:)=xc2;compt=compt+1;end;if 1, cIx=xc(i, 1);\% cIy=xc(i, 2);\% Coords. of the point crIx=round(cIx);\% on the initial image crIy=round(cIy);\% itIx=cIx - crIx;\% Coefficients itIy=cIy - crIy;\% to compute if itIx >}}
{\footnotesize\ttfamily \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} \mbox{\hyperlink{ginput4_8m_aafbb9d50e573e4009d0650c645566ddd}{nargin}}$<$ 4, \mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}=5; \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} \mbox{\hyperlink{ginput4_8m_aafbb9d50e573e4009d0650c645566ddd}{nargin}}$<$ 3, \mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}=5; \mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}};\mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}};\mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} \mbox{\hyperlink{ginput4_8m_aafbb9d50e573e4009d0650c645566ddd}{nargin}}$<$ 6, wx2=-\/1; wy2=-\/1;\mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}};\%\mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}=\mbox{\hyperlink{visualize__distortions_8m_a45582fcee3c7b631afa5f55a959b0c13}{ones}}(2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+1, 2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+1);\mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}=exp(-\/((-\/wintx\+:wintx)\textquotesingle{}/(\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}})).$^\wedge$2) $\ast$exp(-\/((-\/winty\+:winty)/(\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}})).$^\wedge$2);\mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}}(wx2 $>$0) \&(wy2 $>$0), \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}}((\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}} -\/ wx2)$>$=2)\&((\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}} -\/ wy2)$>$=2), \mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}(\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+1-\/wx2\+:wintx+1+wx2, \mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+1-\/wy2\+:winty+1+wy2)=\mbox{\hyperlink{scanner__calibration__script_8m_a495838e20f780998846263933acb0819}{zeros}}(2 $\ast$wx2+1, 2 $\ast$wy2+1); \mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}};\mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}};offx=\mbox{[}-\/wintx\+:wintx\mbox{]}\textquotesingle{} $\ast$\mbox{\hyperlink{visualize__distortions_8m_a45582fcee3c7b631afa5f55a959b0c13}{ones}}(1, 2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+1);offy=\mbox{\hyperlink{visualize__distortions_8m_a45582fcee3c7b631afa5f55a959b0c13}{ones}}(2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+1, 1) $\ast$\mbox{[}-\/winty\+:winty\mbox{]};\mbox{\hyperlink{_compute_stripes_8m_a698a8ac0b1fd75d3c716b842b0206c67}{resolution}}=0.\+005;\mbox{\hyperlink{go__calib__stereo_8m_a15441a1c53e758379cbf1bb004cbd66a}{Max\+Iter}}=10;\mbox{[}\mbox{\hyperlink{willson__read_8m_a2f6e152702d97ea3f1b96a6e2e2b9687}{nx}}, \mbox{\hyperlink{willson__read_8m_a2f43d084523823503800b3a4a5d309ca}{ny}}\mbox{]}=\mbox{\hyperlink{undistort__image__no__read_8m_acef99621e828a8da6e90436ef5178cea}{size}}(\mbox{\hyperlink{mosaic__no__read_8m_a2519f364506853a3dad3e65e1df67c13}{I}});\mbox{\hyperlink{normalize2_8m_a8cc2e7240164328fdc3f0e5e21032c56}{N}}=\mbox{\hyperlink{undistort__image__no__read_8m_acef99621e828a8da6e90436ef5178cea}{size}}(\mbox{\hyperlink{stereo__triangulation_8m_ab3c554be4c0e54bab5c9b00203de4941}{xt}}, 1);\mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}=\mbox{\hyperlink{stereo__triangulation_8m_ab3c554be4c0e54bab5c9b00203de4941}{xt}};\% first guess... they don \textquotesingle{}\mbox{\hyperlink{rectify__stereo__pair_8m_aaccc9105df5383111407fd5b41255e23}{t}} move !!!\mbox{\hyperlink{readras_8m_a7aead736a07eaf25623ad7bfa1f0ee2d}{type}}=\mbox{\hyperlink{scanner__calibration__script_8m_a495838e20f780998846263933acb0819}{zeros}}(1, \mbox{\hyperlink{normalize2_8m_a8cc2e7240164328fdc3f0e5e21032c56}{N}});for \mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}}=1\+:\mbox{\hyperlink{normalize2_8m_a8cc2e7240164328fdc3f0e5e21032c56}{N}}, \mbox{\hyperlink{edgefinder_8m_a30a82f4324aeecaf1bcb5082c06f5949}{v\+\_\+extra}}=\mbox{\hyperlink{_compute_stripes_8m_a698a8ac0b1fd75d3c716b842b0206c67}{resolution}}+1; \% just larger \mbox{\hyperlink{compute__homography_8m_af3f959e84fefd95105b45aa5de288711}{than}} \mbox{\hyperlink{_compute_stripes_8m_a698a8ac0b1fd75d3c716b842b0206c67}{resolution}} \mbox{\hyperlink{edgefinder_8m_a834d18df065d376d123645fee8de8766}{compt}}=0; \% no iteration yet \mbox{\hyperlink{ima__read__calib__no__read_8m_afbc447f3197e9cdcaceaceab8ed359e2}{while}}(\mbox{\hyperlink{willson__convert_8m_a9c27fc2ed3dd0bbc5add976bd170b402}{norm}}(\mbox{\hyperlink{edgefinder_8m_a30a82f4324aeecaf1bcb5082c06f5949}{v\+\_\+extra}}) $>$ \mbox{\hyperlink{_compute_stripes_8m_a698a8ac0b1fd75d3c716b842b0206c67}{resolution}}) \&(\mbox{\hyperlink{edgefinder_8m_a834d18df065d376d123645fee8de8766}{compt}}$<$ \mbox{\hyperlink{go__calib__stereo_8m_a15441a1c53e758379cbf1bb004cbd66a}{Max\+Iter}}), c\+Ix=\mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}(\mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}}, 1); \% c\+Iy=\mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}(\mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}}, 2); \% Coords. of the \mbox{\hyperlink{willson__convert_8m_aeb407484ccae58e27ee8ade327e0651b}{point}} cr\+Ix=round(c\+Ix); \% \mbox{\hyperlink{visualize__distortions_8m_a58ab1fd68e97078232808206b850161b}{on}} the initial \mbox{\hyperlink{script__fit__distortion_8m_ac8a8411243371a1be29a938cf1c083fb}{image}} cr\+Iy=round(c\+Iy); \% it\+Ix=c\+Ix -\/ cr\+Ix; \% Coefficients \mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}}=c\+Iy -\/ cr\+Iy; \% \mbox{\hyperlink{inverse__motion_8m_adaa3d343ac20bed84559c0771f592ed4}{to}} compute \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} it\+Ix $>$ 0, \% the sub pixel \mbox{\hyperlink{cornerfinder__saddle__point_8m_af9023cb1de60b857310aedef005fa797}{v\+Ix}}=\mbox{[}it\+Ix 1-\/it\+Ix 0\mbox{]}\textquotesingle{}; \% accuracy. \mbox{\hyperlink{go__calib__stereo_8m_a78a072094b6e0d352ef9b3c4bdf3799b}{else}} \mbox{\hyperlink{cornerfinder__saddle__point_8m_af9023cb1de60b857310aedef005fa797}{v\+Ix}}=\mbox{[}0 1+it\+Ix -\/it\+Ix\mbox{]}\textquotesingle{}; \mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}}; \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} \mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}} $>$ 0, \mbox{\hyperlink{cornerfinder__saddle__point_8m_af78ee5dddd0ca0db7791f30dab64dda4}{v\+Iy}}=\mbox{[}\mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}} 1-\/\mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}} 0\mbox{]}; \mbox{\hyperlink{go__calib__stereo_8m_a78a072094b6e0d352ef9b3c4bdf3799b}{else}} \mbox{\hyperlink{cornerfinder__saddle__point_8m_af78ee5dddd0ca0db7791f30dab64dda4}{v\+Iy}}=\mbox{[}0 1+\mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}} -\/\mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}}\mbox{]}; \mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}}; \% What \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} the sub \mbox{\hyperlink{script__fit__distortion_8m_ac8a8411243371a1be29a938cf1c083fb}{image}} \mbox{\hyperlink{go__calib__optim__iter__weak_8m_a00d9614e711bf169f15ae8e3e35d30df}{is}} not in? \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}}(cr\+Ix-\/\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}-\/2$<$ 1), \mbox{\hyperlink{cornerfinder__saddle__point_8m_a5cebf6c66aa9ad1f352db36f41e81036}{xmin}}=1;\mbox{\hyperlink{cornerfinder__saddle__point_8m_aaa545f09e6592c936f524ca484584c28}{xmax}}=2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+5; \mbox{\hyperlink{rodrigues_8m_a5f033261004b0140fc2e1a4f5ba9f9b4}{elseif}}(cr\+Ix+\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+2 $>$ \mbox{\hyperlink{willson__read_8m_a2f6e152702d97ea3f1b96a6e2e2b9687}{nx}}), \mbox{\hyperlink{cornerfinder__saddle__point_8m_aaa545f09e6592c936f524ca484584c28}{xmax}}=\mbox{\hyperlink{willson__read_8m_a2f6e152702d97ea3f1b96a6e2e2b9687}{nx}};\mbox{\hyperlink{cornerfinder__saddle__point_8m_a5cebf6c66aa9ad1f352db36f41e81036}{xmin}}=\mbox{\hyperlink{willson__read_8m_a2f6e152702d97ea3f1b96a6e2e2b9687}{nx}}-\/2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}-\/4; \mbox{\hyperlink{go__calib__stereo_8m_a78a072094b6e0d352ef9b3c4bdf3799b}{else}} \mbox{\hyperlink{cornerfinder__saddle__point_8m_a5cebf6c66aa9ad1f352db36f41e81036}{xmin}}=cr\+Ix-\/\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}-\/2;\mbox{\hyperlink{cornerfinder__saddle__point_8m_aaa545f09e6592c936f524ca484584c28}{xmax}}=cr\+Ix+\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+2; \mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}}; \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}}(cr\+Iy-\/\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}-\/2$<$ 1), \mbox{\hyperlink{cornerfinder__saddle__point_8m_a2d98da502a985371babc8e0230b0a536}{ymin}}=1;\mbox{\hyperlink{cornerfinder__saddle__point_8m_aa2b7f6145d75dc845bff0f00c6452e54}{ymax}}=2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+5; \mbox{\hyperlink{rodrigues_8m_a5f033261004b0140fc2e1a4f5ba9f9b4}{elseif}}(cr\+Iy+\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+2 $>$ \mbox{\hyperlink{willson__read_8m_a2f43d084523823503800b3a4a5d309ca}{ny}}), \mbox{\hyperlink{cornerfinder__saddle__point_8m_aa2b7f6145d75dc845bff0f00c6452e54}{ymax}}=\mbox{\hyperlink{willson__read_8m_a2f43d084523823503800b3a4a5d309ca}{ny}};\mbox{\hyperlink{cornerfinder__saddle__point_8m_a2d98da502a985371babc8e0230b0a536}{ymin}}=\mbox{\hyperlink{willson__read_8m_a2f43d084523823503800b3a4a5d309ca}{ny}}-\/2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}-\/4; \mbox{\hyperlink{go__calib__stereo_8m_a78a072094b6e0d352ef9b3c4bdf3799b}{else}} \mbox{\hyperlink{cornerfinder__saddle__point_8m_a2d98da502a985371babc8e0230b0a536}{ymin}}=cr\+Iy-\/\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}-\/2;\mbox{\hyperlink{cornerfinder__saddle__point_8m_aa2b7f6145d75dc845bff0f00c6452e54}{ymax}}=cr\+Iy+\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+2; \mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}}; \mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}=\mbox{\hyperlink{mosaic__no__read_8m_a2519f364506853a3dad3e65e1df67c13}{I}}(xmin\+:xmax, ymin\+:ymax);\% The necessary neighborhood \mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}=conv2(conv2(\mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}, \mbox{\hyperlink{cornerfinder__saddle__point_8m_af9023cb1de60b857310aedef005fa797}{v\+Ix}}, \textquotesingle{}\mbox{\hyperlink{rectify__stereo__pair_8m_a74de3909f790e0187e6baa753abebdf4}{same}}\textquotesingle{}), \mbox{\hyperlink{cornerfinder__saddle__point_8m_af78ee5dddd0ca0db7791f30dab64dda4}{v\+Iy}}, \textquotesingle{}\mbox{\hyperlink{rectify__stereo__pair_8m_a74de3909f790e0187e6baa753abebdf4}{same}}\textquotesingle{}); \mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}=\mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}(2\+:2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+4, 2\+:2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+4);\% The subpixel interpolated neighborhood \mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}=c\+Ix+offx; \mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}=c\+Iy+offy; \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} 1, \%$\sim$saddle,\mbox{[}gy, gx\mbox{]}=gradient(\mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}); \% The gradient \mbox{\hyperlink{script__fit__distortion_8m_ac8a8411243371a1be29a938cf1c083fb}{image}} gx=gx(2\+:2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+2, 2\+:2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+2);\% \mbox{\hyperlink{error__depth__list_8m_ad5c4a59ae665afd234a9b99e05b922f2}{extraction}} of the useful parts only gy=gy(2\+:2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+2, 2\+:2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+2);\% of the gradients gxx=gx .$\ast$gx .$\ast$\mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}; gyy=gy .$\ast$gy .$\ast$\mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}; gxy=gx .$\ast$gy .$\ast$\mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}; \mbox{\hyperlink{_test_function_8m_a65ba841e01d6db7733e90a5b7f9e6f80}{bb}}=\mbox{[}\mbox{\hyperlink{go__calib__optim__iter__weak_8m_a84fc371dc8106a6d6ade7b5e736f09b7}{sum}}(\mbox{\hyperlink{go__calib__optim__iter__weak_8m_a84fc371dc8106a6d6ade7b5e736f09b7}{sum}}(gxx .$\ast$\mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}+gxy .$\ast$\mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}));\mbox{\hyperlink{go__calib__optim__iter__weak_8m_a84fc371dc8106a6d6ade7b5e736f09b7}{sum}}(\mbox{\hyperlink{go__calib__optim__iter__weak_8m_a84fc371dc8106a6d6ade7b5e736f09b7}{sum}}(gxy .$\ast$\mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}+gyy .$\ast$\mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}))\mbox{]}; \mbox{\hyperlink{project__points__weak_8m_aed4504f87c8bc9931dde0c986b52a334}{a}}=\mbox{\hyperlink{go__calib__optim__iter__weak_8m_a84fc371dc8106a6d6ade7b5e736f09b7}{sum}}(\mbox{\hyperlink{go__calib__optim__iter__weak_8m_a84fc371dc8106a6d6ade7b5e736f09b7}{sum}}(gxx)); \mbox{\hyperlink{smooth__images_8m_a7a1752f5e40c5479a01672ac853b1541}{b}}=\mbox{\hyperlink{go__calib__optim__iter__weak_8m_a84fc371dc8106a6d6ade7b5e736f09b7}{sum}}(\mbox{\hyperlink{go__calib__optim__iter__weak_8m_a84fc371dc8106a6d6ade7b5e736f09b7}{sum}}(gxy)); \mbox{\hyperlink{runme_8m_aa49cfdd4fa4d74d71f78a001a1b635d0}{c}}=\mbox{\hyperlink{go__calib__optim__iter__weak_8m_a84fc371dc8106a6d6ade7b5e736f09b7}{sum}}(\mbox{\hyperlink{go__calib__optim__iter__weak_8m_a84fc371dc8106a6d6ade7b5e736f09b7}{sum}}(gyy)); dt=\mbox{\hyperlink{project__points__weak_8m_aed4504f87c8bc9931dde0c986b52a334}{a}} $\ast$\mbox{\hyperlink{runme_8m_aa49cfdd4fa4d74d71f78a001a1b635d0}{c}} -\/ \mbox{\hyperlink{smooth__images_8m_a7a1752f5e40c5479a01672ac853b1541}{b}}$^\wedge$2; \mbox{\hyperlink{edgefinder_8m_a5a62ce42cd1ef02cb40975ee06079645}{xc2}}=\mbox{[}\mbox{\hyperlink{runme_8m_aa49cfdd4fa4d74d71f78a001a1b635d0}{c}} $\ast$\mbox{\hyperlink{_test_function_8m_a65ba841e01d6db7733e90a5b7f9e6f80}{bb}}(1) -\/\mbox{\hyperlink{smooth__images_8m_a7a1752f5e40c5479a01672ac853b1541}{b}} $\ast$\mbox{\hyperlink{_test_function_8m_a65ba841e01d6db7733e90a5b7f9e6f80}{bb}}(2) \mbox{\hyperlink{project__points__weak_8m_aed4504f87c8bc9931dde0c986b52a334}{a}} $\ast$\mbox{\hyperlink{_test_function_8m_a65ba841e01d6db7733e90a5b7f9e6f80}{bb}}(2) -\/\mbox{\hyperlink{smooth__images_8m_a7a1752f5e40c5479a01672ac853b1541}{b}} $\ast$\mbox{\hyperlink{_test_function_8m_a65ba841e01d6db7733e90a5b7f9e6f80}{bb}}(1)\mbox{]}/dt; \mbox{\hyperlink{go__calib__stereo_8m_a78a072094b6e0d352ef9b3c4bdf3799b}{else}} \mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}=\mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}(2\+:2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+2, 2\+:2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+2); \mbox{\hyperlink{rodrigues_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}}= repmat(\mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}(\+:), 1, 6) .$\ast$\mbox{[}\mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}(\+:).$^\wedge$2 \mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}(\+:).$\ast$\mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}(\+:) \mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}(\+:).$^\wedge$2 \mbox{\hyperlink{visualize__distortions_8m_a7bbfda5adf16be7dc49154740eb37388}{px}}(\+:) \mbox{\hyperlink{visualize__distortions_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}{py}}(\+:) \mbox{\hyperlink{visualize__distortions_8m_a45582fcee3c7b631afa5f55a959b0c13}{ones}}((2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+1) $\ast$(2 $\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+1), 1)\mbox{]}; \mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}=inv(\mbox{\hyperlink{rodrigues_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}}\textquotesingle{} $\ast$\mbox{\hyperlink{rodrigues_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}}) $\ast$\mbox{\hyperlink{rodrigues_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}}\textquotesingle{} $\ast$(\mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}(\+:).$\ast$\mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}(\+:)); \mbox{\hyperlink{edgefinder_8m_a5a62ce42cd1ef02cb40975ee06079645}{xc2}}=(-\/inv(\mbox{[}2 $\ast$\mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(1) \mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(2) ;\mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(2) 2 $\ast$\mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(3)\mbox{]}) $\ast$\mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(4\+:5))\textquotesingle{}; \mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}}; \mbox{\hyperlink{edgefinder_8m_a30a82f4324aeecaf1bcb5082c06f5949}{v\+\_\+extra}}=\mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}(\mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}},\+:) -\/ \mbox{\hyperlink{edgefinder_8m_a5a62ce42cd1ef02cb40975ee06079645}{xc2}}; \mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}(\mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}},\+:)=\mbox{\hyperlink{edgefinder_8m_a5a62ce42cd1ef02cb40975ee06079645}{xc2}}; \mbox{\hyperlink{edgefinder_8m_a834d18df065d376d123645fee8de8766}{compt}}=\mbox{\hyperlink{edgefinder_8m_a834d18df065d376d123645fee8de8766}{compt}}+1; \mbox{\hyperlink{write__image_8m_afb358f48b1646c750fb9da6c6585be2b}{end}}; \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} 1, c\+Ix=\mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}(\mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}}, 1); \% c\+Iy=\mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}(\mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}}, 2); \% Coords. of the \mbox{\hyperlink{willson__convert_8m_aeb407484ccae58e27ee8ade327e0651b}{point}} cr\+Ix=round(c\+Ix); \% \mbox{\hyperlink{visualize__distortions_8m_a58ab1fd68e97078232808206b850161b}{on}} the initial \mbox{\hyperlink{script__fit__distortion_8m_ac8a8411243371a1be29a938cf1c083fb}{image}} cr\+Iy=round(c\+Iy); \% it\+Ix=c\+Ix -\/ cr\+Ix; \% Coefficients \mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}}=c\+Iy -\/ cr\+Iy; \% \mbox{\hyperlink{inverse__motion_8m_adaa3d343ac20bed84559c0771f592ed4}{to}} compute \mbox{\hyperlink{stereo_2otros_2matlab2opencv_8m_a395c74f44b735213449a80587b6388e9}{if}} it\+Ix $>$}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a51f20d6b1b54a2eee3be0e8adc96a0ae}\label{cornerfinder__saddle__point_8m_a51f20d6b1b54a2eee3be0e8adc96a0ae}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!param@{param}}
\index{param@{param}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{param}{param}}
{\footnotesize\ttfamily param = inv(\mbox{\hyperlink{rodrigues_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}}\textquotesingle{}$\ast$\mbox{\hyperlink{rodrigues_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}})$\ast$\mbox{\hyperlink{rodrigues_8m_a3b98e2dffc6cb06a89dcb0d5c60a0206}{A}}\textquotesingle{}$\ast$( \mbox{\hyperlink{_compute_stripes_8m_ae37ced135688952706a4686437438cf2}{mask}}(\+:).$\ast$\mbox{\hyperlink{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}{SI}}(\+:))}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_ad72dfc94795e93b959508fd8af2bd3d7}\label{cornerfinder__saddle__point_8m_ad72dfc94795e93b959508fd8af2bd3d7}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!points@{points}}
\index{points@{points}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{points}{points}}
{\footnotesize\ttfamily For the diverged points}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a4f50f400529be4f289ee7109bf3d0ccf}\label{cornerfinder__saddle__point_8m_a4f50f400529be4f289ee7109bf3d0ccf}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!px@{px}}
\index{px@{px}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{px}{px}}
{\footnotesize\ttfamily The subpixel interpolated neighborhood px = c\+Ix + offx}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}\label{cornerfinder__saddle__point_8m_a2cdc66c1c33fd831cc3a2f3a7c06ea1a}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!py@{py}}
\index{py@{py}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{py}{py}}
{\footnotesize\ttfamily py = c\+Iy + offy}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}\label{cornerfinder__saddle__point_8m_a9189b8c237d7e133ae5d30ff453ae62c}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!SI@{SI}}
\index{SI@{SI}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{SI}{SI}}
{\footnotesize\ttfamily The necessary neighborhood SI = \mbox{\hyperlink{mosaic__no__read_8m_a2519f364506853a3dad3e65e1df67c13}{I}}(xmin\+:xmax,ymin\+:ymax)}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a30a82f4324aeecaf1bcb5082c06f5949}\label{cornerfinder__saddle__point_8m_a30a82f4324aeecaf1bcb5082c06f5949}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!v\_extra@{v\_extra}}
\index{v\_extra@{v\_extra}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{v\_extra}{v\_extra}}
{\footnotesize\ttfamily v\+\_\+extra = \mbox{\hyperlink{edgefinder_8m_a4b9e3580e8976217fce1afe54cb77649}{xc}}(\mbox{\hyperlink{stereo__gui_8m_a6f6ccfcf58b31cb6412107d9d5281426}{i}},\+:) -\/ \mbox{\hyperlink{edgefinder_8m_a5a62ce42cd1ef02cb40975ee06079645}{xc2}}}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_af9023cb1de60b857310aedef005fa797}\label{cornerfinder__saddle__point_8m_af9023cb1de60b857310aedef005fa797}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!vIx@{vIx}}
\index{vIx@{vIx}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{vIx}{vIx}}
{\footnotesize\ttfamily accuracy \mbox{\hyperlink{go__calib__stereo_8m_a78a072094b6e0d352ef9b3c4bdf3799b}{else}} v\+Ix = \mbox{[}it\+Ix 1-\/it\+Ix 0\mbox{]}\textquotesingle{}}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_af78ee5dddd0ca0db7791f30dab64dda4}\label{cornerfinder__saddle__point_8m_af78ee5dddd0ca0db7791f30dab64dda4}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!vIy@{vIy}}
\index{vIy@{vIy}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{vIy}{vIy}}
{\footnotesize\ttfamily \mbox{\hyperlink{go__calib__stereo_8m_a78a072094b6e0d352ef9b3c4bdf3799b}{else}} v\+Iy = \mbox{[}\mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}} 1-\/\mbox{\hyperlink{cornerfinder__saddle__point_8m_a0650a7366cca60864c1b95ec8456223a}{it\+Iy}} 0\mbox{]}}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a8ecf39fb02bd311cd04c72d89cbfb6d7}\label{cornerfinder__saddle__point_8m_a8ecf39fb02bd311cd04c72d89cbfb6d7}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!xc@{xc}}
\index{xc@{xc}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{xc}{xc}}
{\footnotesize\ttfamily xc = fliplr(xc)}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_afff7195fd727c87c72bd430c656316d8}\label{cornerfinder__saddle__point_8m_afff7195fd727c87c72bd430c656316d8}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!xc2@{xc2}}
\index{xc2@{xc2}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{xc2}{xc2}}
{\footnotesize\ttfamily xc2 = (-\/inv(\mbox{[}2$\ast$\mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(1) \mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(2) ; \mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(2) 2$\ast$\mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(3) \mbox{]}) $\ast$ \mbox{\hyperlink{scanner__calibration__script_8m_a1aac993aff8e07a659255e2fe7a94ec0}{param}}(4\+:5))\textquotesingle{}}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_aaa545f09e6592c936f524ca484584c28}\label{cornerfinder__saddle__point_8m_aaa545f09e6592c936f524ca484584c28}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!xmax@{xmax}}
\index{xmax@{xmax}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{xmax}{xmax}}
{\footnotesize\ttfamily xmax = 2$\ast$\mbox{\hyperlink{saving__calib__no__results_8m_aaae28b7917f6488ebee15109ee4bf584}{wintx}}+5}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a5cebf6c66aa9ad1f352db36f41e81036}\label{cornerfinder__saddle__point_8m_a5cebf6c66aa9ad1f352db36f41e81036}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!xmin@{xmin}}
\index{xmin@{xmin}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{xmin}{xmin}}
{\footnotesize\ttfamily \mbox{\hyperlink{go__calib__stereo_8m_a78a072094b6e0d352ef9b3c4bdf3799b}{else}} xmin =1}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_ae99e8f063b011dafba65cd94236b07b9}\label{cornerfinder__saddle__point_8m_ae99e8f063b011dafba65cd94236b07b9}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!xt@{xt}}
\index{xt@{xt}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{xt}{xt}}
{\footnotesize\ttfamily xt = fliplr(xt)}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_aa2b7f6145d75dc845bff0f00c6452e54}\label{cornerfinder__saddle__point_8m_aa2b7f6145d75dc845bff0f00c6452e54}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!ymax@{ymax}}
\index{ymax@{ymax}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{ymax}{ymax}}
{\footnotesize\ttfamily ymax = 2$\ast$\mbox{\hyperlink{saving__calib__no__results_8m_a4b7bcd3a9dc801cf789379ec4d33ebc1}{winty}}+5}

\mbox{\Hypertarget{cornerfinder__saddle__point_8m_a2d98da502a985371babc8e0230b0a536}\label{cornerfinder__saddle__point_8m_a2d98da502a985371babc8e0230b0a536}} 
\index{cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}!ymin@{ymin}}
\index{ymin@{ymin}!cornerfinder\_saddle\_point.m@{cornerfinder\_saddle\_point.m}}
\doxysubsubsection{\texorpdfstring{ymin}{ymin}}
{\footnotesize\ttfamily \mbox{\hyperlink{go__calib__stereo_8m_a78a072094b6e0d352ef9b3c4bdf3799b}{else}} ymin =1}

